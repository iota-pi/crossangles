function removeCourse(e){"use strict";var t=$(e.currentTarget).parents("div.row"),s=t.parent(),i=t.children().first(),a=i.html().replace(/ -.+/,""),r=courseList.indexOf(a);-1!==r&&courseList.splice(r,1),t.children().fadeOut(200,function(){t.children().show().css("visibility","hidden"),s.slideUp(200,function(){s.remove(),0===$("#courses").children().length&&$("#courses").css("margin-bottom","-10px")})})}function addCourse(e){"use strict";courseList.push(e.replace(/ -.*/,""));var t=$("#courses"),s=$("<span>").addClass("glyphicon glyphicon-remove-circle remove-icon").attr("aria-hidden",!0).click(removeCourse),i=$("<div>").append($('<div class="row">').html('<div class="col-10">'+e+"</div>").append($('<div class="col-2" style="text-align: right;">').append(s)));t.append(i).css("margin-bottom",0),i.children().hide(),i.hide().slideDown(200,function(){i.children().fadeIn(200)})}function timetableToPNG(){"use strict";var e=document.getElementById("timetable");html2canvas(e,{onrendered:function(e){var t=e.getContext("2d"),s=t.toDataURL("image/png");download(s)}})}function getColour(e){"use strict";var t=[[19,111,225],[160,29,33],[0,140,72],[102,44,145],[255,107,0],[10,28,210],[238,46,20]];return t[e%t.length].join(",")}function startDrag(e,t){"use strict";var s=$(e.target),i=s.attr("id"),a=shadowList[i];a.fadeIn(100),s.css({position:"relative"})}function stopDrag(e,t){"use strict";function s(e,t){e.detach().appendTo(t).css({position:"absolute",left:0,top:0})}var n,o,i=$(e.target),a=i.width()/2*i.width()/2,r=null;$(".class-shadow:visible").each(function(){var e=$(this).offset(),t=i.offset(),s=Math.pow(e.left-t.left,2)+Math.pow(e.top-t.top,2);a>s&&(a=s,r=$(this))}),null!==r&&(n=i.attr("id"),o=shadowList[n].index(r),$('.class-drag[id^="'+n.replace(/\d$/,"")+'"]').each(function(){var e=$(this),t=$(shadowList[$(this).attr("id")][o]);s(e,t.parent())})),$(".class-shadow").fadeOut(200)}function unique(e){"use strict";var i,t=[],s=[];for(i=0;i<e.length;i+=1)-1===s.indexOf(String(e[i]))&&(t.push(e[i]),s.push(String(e[i])));return t}function createClass(e,t,s,i,a,r){"use strict";var n,o,c,d,u,l,h="<div>"+("CBS"!==s?s+": "+i:i)+"</div>",p=0;for(t="CBS"!==s?'<div class="class-capacity">'+t.replace(","," / ")+"</div>":"",o=0;o<e.length;o+=1)n=e[o],-1===r.indexOf(n.join(",")+s+i)?(r.push(n.join(",")+s+i),c=s+i+(o-p),d=n[2]-n[1],u=$("#"+(n[0]+n[1]).replace(".5","_30")),l=$('<div class="class-drag" id="'+c+'">').append($("<div>").html(h+t)).draggable({stack:".class-drag",scroll:!0,containment:u.parents(".row"),start:startDrag,stop:stopDrag}).css({position:"absolute","background-color":"rgb("+getColour(a)+")"}),l.appendTo(u),l.height(u.outerHeight()*d*2),classList.push(l)):p+=1;document.getElementById("showcap").checked||$(".class-capacity").hide()}function createShadow(e,t,s,i){"use strict";e=unique(e);var a,r,n,o,c,d,u,l,h;for(n=0;n<e.length;n+=1){if(a=e[n],r=a.join(","),h=t+n,c=void 0!==i[t]?i[t].indexOf(r):-1,-1===c)i.hasOwnProperty(t)?i[t].push(r):i[t]=[r],l=a[2]-a[1],u=$("#"+(a[0]+a[1]).replace(".5","_30")),d=$('<div class="class-shadow">').css({"background-color":"rgba("+getColour(s)+", 0.7)"}),d.appendTo(u),d.height(u.outerHeight()*l*2);else{for(d=void 0,o=0;o<shadowList[h].length;o+=1)if($(shadowList[h][o]).parent().attr("id")===(a[0]+a[1]).replace(".5","_30")){d=$(shadowList[h][o]);break}void 0===d&&console.error("DIV disappeared in the middle of a function call!")}shadowList.hasOwnProperty(h)?shadowList[h]=shadowList[h].push(d):shadowList[h]=d}}function clearLists(){"use strict";classList=[],shadowList={}}var courseList=["CBS"],classList=[],shadowList={};!function(){"use strict";function t(){var t=function(e){return function(t,s){var i=[],a=[],r=courseList;t=t.toLowerCase(),$.each(e,function(e,s){if(r.indexOf(e)>=0)return!0;var n=e+" - "+s,o=n.toLowerCase().indexOf(t);o>0?i.push(n):0===o&&a.push(n)}),a.sort(),a.length<10&&i.length>0&&(i.sort(),a=a.concat(i)),s(a.slice(0,10))}};$(".typeahead.coursein").typeahead({name:"courses",source:t(e)})}var e;$.getJSON("data/courses.json",function(s){e=s,$(document).ready(function(){t(),$("#showcap").change(function(){var e=$(".class-capacity");document.getElementById("showcap").checked===!0?e.show():e.hide()})})})}(),$.fn.push=function(e){"use strict";return Array.prototype.push.apply(this,$.makeArray($(e))),this};
