function removeCourse(e){"use strict";var r=$(e.currentTarget).parents("div.row"),t=r.parent(),i=r.children().first(),n=i.html().replace(/ -.+/,""),s=courseList.indexOf(n);-1!==s&&courseList.splice(s,1),r.children().fadeOut(200,function(){r.children().show().css("visibility","hidden"),t.slideUp(200,function(){t.remove(),0===$("#courses").children().length&&$("#courses").css("margin-bottom","-10px")})})}function addCourse(e){"use strict";courseList.push(e.replace(/ -.*/,""));var r=$("#courses"),t=$("<span>").addClass("glyphicon glyphicon-remove-circle remove-icon").attr("aria-hidden",!0).click(removeCourse),i=$("<div>").append($('<div class="row">').html('<div class="col-10">'+e+"</div>").append($('<div class="col-2" style="text-align: right;">').append(t)));r.append(i).css("margin-bottom",0),i.children().hide(),i.hide().slideDown(200,function(){i.children().fadeIn(200)})}function getColour(e){"use strict";var r=[[160,29,33],[19,111,225],[0,140,72],[102,44,145],[255,107,0],[10,28,210],[238,46,20]];return r[e%r.length].join(",")}function startDrag(e,r){"use strict";var t=$(e.target),i=t.attr("id"),n=shadowList[i];n.fadeIn(100),t.css({position:"relative"})}function stopDrag(e,r){"use strict";function t(e,r){e.detach().appendTo(r).css({position:"absolute",left:0,top:0})}var o,a,i=$(e.target),n=i.width()/2*i.width()/2,s=null;$(".class-shadow:visible").each(function(){var e=$(this).offset(),r=i.offset(),t=Math.pow(e.left-r.left,2)+Math.pow(e.top-r.top,2);n>t&&(n=t,s=$(this))}),null!==s&&(o=i.attr("id"),a=shadowList[o].index(s),$('.class-drag[id^="'+o.replace(/\d$/,"")+'"]').each(function(){var e=$(this),r=$(shadowList[$(this).attr("id")][a]);t(e,r.parent())})),$(".class-shadow").fadeOut(200)}function createClass(e,r,t,i,n){"use strict";var o,a,c,u,l,d,p,s=e.split(","),h=r+": "+t,f=0;for(o=0;o<s.length;o+=1)-1===n.indexOf(s[o]+r+t)?(n.push(s[o]+r+t),a=r+t+(o-f),c=h,u=s[o].replace(/. /,"").split("-"),l=u.length>1?u[1]-u[0]:1,d=$("#"+s[o][0]+ +u[0]),p=$('<div class="class-drag" id="'+a+'">').append($("<div>").html(c)).draggable({stack:".class-drag",scroll:!0,containment:d.parents(".row"),start:startDrag,stop:stopDrag}).css({position:"absolute","background-color":"rgb("+getColour(i)+")"}),p.appendTo(d),p.height(d.outerHeight()*l),classList.push(p)):f+=1}function createShadow(e,r,t,i){"use strict";var n,s,o,a,c,u,l,p,d=0;for(n=e.split(","),o=0;o<n.length;o+=1)s=n[o],-1===i.indexOf(s+r)?(i.push(s+r),u=s.replace(/. /,"").split("-"),l=u.length>1?u[1]-u[0]:1,c=$("#"+s[0]+ +u[0]),a=$('<div class="class-shadow">').css({"background-color":"rgba("+getColour(t)+", 0.7)"}),a.appendTo(c),a.height(c.outerHeight()*l),p=r+(o-d),console.log(s,p),shadowList.hasOwnProperty(p)?shadowList[p]=shadowList[p].push(a):shadowList[p]=a):d+=1}function clearLists(){"use strict";classList=[],shadowList={}}var courseList=[],classList=[],shadowList={};!function(){"use strict";function r(){var r=function(e){return function(r,t){var i=[],n=[],s=courseList;r=r.toLowerCase(),$.each(e,function(e,t){if(s.indexOf(e)>=0)return!0;var o=e+" - "+t,a=o.toLowerCase().indexOf(r);a>0?i.push(o):0===a&&n.push(o)}),n.sort(),n.length<10&&i.length>0&&(i.sort(),n=n.concat(i)),t(n.slice(0,10))}};$(".typeahead.coursein").typeahead({name:"courses",source:r(e)})}var e;$.getJSON("data/courses.json",function(t){e=t,$(document).ready(function(){r()})})}(),$.fn.push=function(e){"use strict";return Array.prototype.push.apply(this,$.makeArray($(e))),this};
