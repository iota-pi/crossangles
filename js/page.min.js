function removeCourse(e){"use strict";var t=$(e.currentTarget).parents("div.row"),s=t.parent(),i=t.children().first(),r=i.html().replace(/ -.+/,""),n=courseList.indexOf(r);-1!==n&&courseList.splice(n,1),t.children().fadeOut(200,function(){t.children().show().css("visibility","hidden"),s.slideUp(200,function(){s.remove(),0===$("#courses").children().length&&$("#courses").css("margin-bottom","-10px")})})}function addCourse(e){"use strict";courseList.push(e.replace(/ -.*/,""));var t=$("#courses"),s=$("<span>").addClass("glyphicon glyphicon-remove-circle remove-icon").attr("aria-hidden",!0).click(removeCourse),i=$("<div>").append($('<div class="row">').html('<div class="col-10">'+e+"</div>").append($('<div class="col-2" style="text-align: right;">').append(s)));t.append(i).css("margin-bottom",0),i.children().hide(),i.hide().slideDown(200,function(){i.children().fadeIn(200)})}function timetableToPNG(){"use strict";var e=document.getElementById("timetable");html2canvas(e,{onrendered:function(e){var t=e.getContext("2d"),s=t.toDataURL("image/png");download(s)}})}function getColour(e){"use strict";var t=[[19,111,225],[160,29,33],[0,140,72],[102,44,145],[255,107,0],[10,28,210],[238,46,20]];return t[e%t.length].join(",")}function startDrag(e,t){"use strict";var s=$(e.target),i=s.attr("id"),r=shadowList[i];r.fadeIn(100),s.css({position:"relative"})}function stopDrag(e,t){"use strict";function s(e,t){e.detach().appendTo(t).css({position:"absolute",left:0,top:0})}var a,o,i=$(e.target),r=i.width()/2*i.width()/2,n=null;$(".class-shadow:visible").each(function(){var e=$(this).offset(),t=i.offset(),s=Math.pow(e.left-t.left,2)+Math.pow(e.top-t.top,2);r>s&&(r=s,n=$(this))}),null!==n&&(a=i.attr("id"),o=shadowList[a].index(n),$('.class-drag[id^="'+a.replace(/\d$/,"")+'"]').each(function(){var e=$(this),t=$(shadowList[$(this).attr("id")][o]);s(e,t.parent()),e.find(".class-capacity").html(t.data("capacity"))})),$(".class-shadow").fadeOut(200)}function unique(e){"use strict";var i,t=[],s=[];for(i=0;i<e.length;i+=1)-1===s.indexOf(String(e[i]))&&(t.push(e[i]),s.push(String(e[i])));return t}function createClass(e,t,s,i,r,n){"use strict";var a,o,c,l,u,d,h="<div>"+("CBS"!==s?s+": "+i:i)+"</div>",f=0;for(t="CBS"!==s?'<div class="class-capacity">'+t.replace(","," / ")+"</div>":'<div class="class-capacity"></div>',o=0;o<e.length;o+=1)a=e[o],-1===n.indexOf(a.join(",")+s+i)?(n.push(a.join(",")+s+i),c=s+i+(o-f),l=a[2]-a[1],u=$("#"+(a[0]+a[1]).replace(".5","_30")),d=$('<div class="class-drag" id="'+c+'">').append($("<div>").html(h+t)).draggable({stack:".class-drag",scroll:!0,containment:u.parents(".row"),start:startDrag,stop:stopDrag}).css({position:"absolute","background-color":"rgb("+getColour(r)+")"}),d.appendTo(u),d.height(u.outerHeight()*l*2),classList.push(d)):f+=1;document.getElementById("showcap").checked||$(".class-capacity").hide()}function createShadow(e,t,s,i,r){"use strict";0===t.indexOf("CBS")&&(i=""),e=unique(e);var n,a,o,u,d,h,f;for(o=0;o<e.length;o+=1)n=e[o],a=n.join(","),f=t+o,r.hasOwnProperty(t)?r[t].push(a):r[t]=[a],h=n[2]-n[1],d=$("#"+(n[0]+n[1]).replace(".5","_30")),u=$('<div class="class-shadow">').css({"background-color":"rgba("+getColour(s)+", 0.7)"}),u.data("capacity",i.replace(","," / ")),u.appendTo(d),u.height(d.outerHeight()*h*2),shadowList.hasOwnProperty(f)?shadowList[f]=shadowList[f].push(u):shadowList[f]=u}function clearLists(){"use strict";classList=[],shadowList={}}var courseList=["CBS"],classList=[],shadowList={};!function(){"use strict";function t(){var t=function(e){return function(t,s){var i=[],r=[],n=courseList;t=t.toLowerCase(),$.each(e,function(e,s){if(n.indexOf(e)>=0)return!0;var a=e+" - "+s,o=a.toLowerCase().indexOf(t);o>0?i.push(a):0===o&&r.push(a)}),r.sort(),r.length<10&&i.length>0&&(i.sort(),r=r.concat(i)),s(r.slice(0,10))}};$(".typeahead.coursein").typeahead({name:"courses",source:t(e)})}var e;$.getJSON("data/courses.json",function(s){e=s,$(document).ready(function(){t(),$("#showcap").change(function(){var e=$(".class-capacity");document.getElementById("showcap").checked===!0?e.show():e.hide()})})})}(),$.fn.push=function(e){"use strict";return Array.prototype.push.apply(this,$.makeArray($(e))),this};
