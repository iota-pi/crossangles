function removeCourse(t){"use strict";var e=$(t.currentTarget).parents("div.row"),s=e.parent(),i=e.children().first(),a=i.html().replace(/ -.+/,""),r=courseList.indexOf(a);-1!==r&&courseList.splice(r,1),e.children().fadeOut(200,function(){e.children().show().css("visibility","hidden"),s.slideUp(200,function(){s.remove(),0===$("#courses").children().length&&$("#courses").css("margin-bottom","-10px")})})}function addCourse(t){"use strict";courseList.push(t.replace(/ -.*/,""));var e=$("#courses"),s=$("<span>").addClass("glyphicon glyphicon-remove-circle remove-icon").attr("aria-hidden",!0).click(removeCourse),i=$("<div>").append($('<div class="row">').html('<div class="col-10">'+t+"</div>").append($('<div class="col-2" style="text-align: right;">').append(s)));e.append(i).css("margin-bottom",0),i.children().hide(),i.hide().slideDown(200,function(){i.children().fadeIn(200)})}function timetableToPNG(){"use strict";var t=document.getElementById("timetable"),e=$(t).width();$(t).removeClass("scroll-x"),$(t).width(720),domtoimage.toPng(t).then(function(s){$(t).addClass("scroll-x"),$(t).width(e),download(s,"timetable-dom.png","image/png")})}function getColour(t){"use strict";var e=[[19,111,225],[160,29,33],[0,140,72],[102,44,145],[255,107,0],[10,28,210],[238,46,20]];return e[t%e.length].join(",")}function startDrag(t,e){"use strict";var s=$(t.target),i=s.attr("id"),a=shadowList[i];a.fadeIn(100),s.css({position:"relative"})}function stopDrag(t,e){"use strict";function s(t,e){t.detach().appendTo(e).css({position:"absolute",left:0,top:0})}var c,o,i=$(t.target),a=i.width()/2*i.width()/2,r=null;$(".class-shadow:visible").each(function(){var t=$(this).offset(),e=i.offset(),s=Math.pow(t.left-e.left,2)+Math.pow(t.top-e.top,2);a>s&&(a=s,r=$(this))}),null!==r&&(c=i.attr("id"),o=shadowList[c].index(r),$('.class-drag[id^="'+c.replace(/\d$/,"")+'"]').each(function(){var t=$(this),e=$(shadowList[$(this).attr("id")][o]);s(t,e.parent()),t.find(".class-capacity").html(e.data("capacity"))})),$(".class-shadow").fadeOut(200)}function unique(t){"use strict";var i,e=[],s=[];for(i=0;i<t.length;i+=1)-1===s.indexOf(String(t[i]))&&(e.push(t[i]),s.push(String(t[i])));return e}function createClass(t,e,s,i,a,r){"use strict";var c,o,n,d,l,u,h="<div>"+("CBS"!==s?s+": "+i:i)+"</div>",p=0;for(e="CBS"!==s?'<div class="class-capacity">'+e.replace(","," / ")+"</div>":'<div class="class-capacity"></div>',o=0;o<t.length;o+=1)c=t[o],-1===r.indexOf(c.join(",")+s+i)?(r.push(c.join(",")+s+i),n=s+i+(o-p),d=c[2]-c[1],l=$("#"+(c[0]+c[1]).replace(".5","_30")),u=$('<div class="class-drag" id="'+n+'">').append($("<div>").html(h+e)).draggable({stack:".class-drag",scroll:!0,containment:l.parents(".row"),start:startDrag,stop:stopDrag}).css({position:"absolute","background-color":"rgb("+getColour(a)+")"}),u.appendTo(l),u.height(l.outerHeight()*d*2),classList.push(u)):p+=1;document.getElementById("showcap").checked||$(".class-capacity").hide()}function createShadow(t,e,s,i,a){"use strict";0===e.indexOf("CBS")&&(i=""),t=unique(t);var r,c,o,l,u,h,p;for(o=0;o<t.length;o+=1)r=t[o],c=r.join(","),p=e+o,a.hasOwnProperty(e)?a[e].push(c):a[e]=[c],h=r[2]-r[1],u=$("#"+(r[0]+r[1]).replace(".5","_30")),l=$('<div class="class-shadow">').css({"background-color":"rgba("+getColour(s)+", 0.7)"}),l.data("capacity",i.replace(","," / ")),l.appendTo(u),l.height(u.outerHeight()*h*2),shadowList.hasOwnProperty(p)?shadowList[p]=shadowList[p].push(l):shadowList[p]=l}function clearLists(){"use strict";classList=[],shadowList={}}var courseList=["CBS"],classList=[],shadowList={};!function(){"use strict";function e(){var e=function(t){return function(e,s){var i=[],a=[],r=courseList;e=e.toLowerCase(),$.each(t,function(t,s){if(r.indexOf(t)>=0)return!0;var c=t+" - "+s,o=c.toLowerCase().indexOf(e);o>0?i.push(c):0===o&&a.push(c)}),a.sort(),a.length<10&&i.length>0&&(i.sort(),a=a.concat(i)),s(a.slice(0,10))}};$(".typeahead.coursein").typeahead({name:"courses",source:e(t)})}var t;$.getJSON("data/courses.json",function(s){t=s,$(document).ready(function(){e(),$("#showcap").change(function(){var t=$(".class-capacity");document.getElementById("showcap").checked===!0?t.show():t.hide()})})})}(),$.fn.push=function(t){"use strict";return Array.prototype.push.apply(this,$.makeArray($(t))),this};
