function removeCourse(s){"use strict";var t=$(s.currentTarget).parents("div.row"),e=t.parent(),a=t.children().first(),i=a.html().replace(/ -.+/,""),o=courseList.indexOf(i);-1!==o&&courseList.splice(o,1),t.children().fadeOut(200,function(){t.children().show().css("visibility","hidden"),e.slideUp(200,function(){e.remove(),0===$("#courses").children().length&&$("#courses").css("margin-bottom","-10px")})})}function addCourse(s){"use strict";courseList.push(s.replace(/ -.*/,""));var t=$("#courses"),e=$("<span>").addClass("glyphicon glyphicon-remove-circle remove-icon").attr("aria-hidden",!0).click(removeCourse),a=$("<div>").append($('<div class="row">').html('<div class="col-10">'+s+"</div>").append($('<div class="col-2" style="text-align: right;">').append(e)));t.append(a).css("margin-bottom",0),a.children().hide(),a.hide().slideDown(200,function(){a.children().fadeIn(200)})}function timetableToPNG(){"use strict";var s=document.getElementById("timetable");$(s).width();$(s).removeClass("scroll-x"),$(s).width(720),domtoimage.toPng(s).then(function(t){$(s).addClass("scroll-x"),$(s).css("width","auto"),download(t,"timetable.png","image/png")})}function getColour(s){"use strict";var t=[[19,111,225],[160,29,33],[0,140,72],[102,44,145],[255,107,0],[10,28,210],[238,46,20]];return t[s%t.length].join(",")}function startDrag(s,t){"use strict";var e=$(s.target),a=e.attr("id"),i=shadowList[a];i.fadeIn(100),e.css({position:"relative"})}function stopDrag(s,t){"use strict";function e(s,t){s.detach().appendTo(t).css({position:"absolute",left:0,top:0})}var c,n,a=$(s.target),i=a.width()/2*a.width()/2,o=null;$(".class-shadow:visible").each(function(){var s=$(this).offset(),t=a.offset(),e=Math.pow(s.left-t.left,2)+Math.pow(s.top-t.top,2);i>e&&(i=e,o=$(this))}),null!==o&&(c=a.attr("id"),n=shadowList[c].index(o),$('.class-drag[id^="'+c.replace(/\d$/,"")+'"]').each(function(){var s=$(this),t=$(shadowList[s.attr("id")][n]);e(s,t.parent()),s.find(".class-capacity").html(t.data("capacity")),classLocations[s.attr("id")]=t.parent().attr("id")})),$(".class-shadow").fadeOut(200)}function unique(s){"use strict";var a,t=[],e=[];for(a=0;a<s.length;a+=1)-1===e.indexOf(String(s[a]))&&(t.push(s[a]),e.push(String(s[a])));return t}function createClass(s,t,e,a,i,o){"use strict";var c,n,r,d,l,u,h,p="<div>"+("CBS"!==e?e+": "+a:a)+"</div>",f=0;for(t="CBS"!==e?'<div class="class-capacity">'+t.replace(","," / ")+"</div>":'<div class="class-capacity"></div>',n=0;n<s.length;n+=1)c=s[n],-1===o.indexOf(c.join(",")+e+a)?(o.push(c.join(",")+e+a),r=e+a+(n-f),d=c[2]-c[1],l=(c[0]+c[1]).replace(".5","_30"),u=$("#"+l),h=$('<div class="class-drag" id="'+r+'">').append($("<div>").html(p+t)).draggable({stack:".class-drag",scroll:!0,containment:u.parents(".row"),start:startDrag,stop:stopDrag}).css({position:"absolute","background-color":"rgb("+getColour(i)+")"}),h.appendTo(u),h.height(u.outerHeight()*d*2),classList.push(h),classLocations.hasOwnProperty(r)||(classLocations[r]=l)):f+=1;document.getElementById("showcap").checked||$(".class-capacity").hide()}function createShadow(s,t,e,a,i){"use strict";0===t.indexOf("CBS")&&(a=""),s=unique(s);var o,c,n,l,u,h,p;for(n=0;n<s.length;n+=1)o=s[n],c=o.join(","),p=t+n,i.hasOwnProperty(t)?i[t].push(c):i[t]=[c],h=o[2]-o[1],u=$("#"+(o[0]+o[1]).replace(".5","_30")),l=$('<div class="class-shadow">').css({"background-color":"rgba("+getColour(e)+", 0.7)"}),l.data("capacity",a.replace(","," / ")),l.appendTo(u),l.height(u.outerHeight()*h*2),shadowList.hasOwnProperty(p)?shadowList[p]=shadowList[p].push(l):shadowList[p]=l}function restoreClasses(){"use strict";function s(s,t){s.detach().appendTo(t).css({position:"absolute",left:0,top:0})}var t,e,a,i,o;for(t in classLocations)classLocations.hasOwnProperty(t)&&(e=$('[id="'+t+'"]'),a=shadowList[t],i=$("#"+classLocations[t]),o=i.find(a),console.log(e,o),s(e,i),e.find(".class-capacity").html(o.data("capacity")))}function clearLists(s){"use strict";classList=[],shadowList={},s!==!0&&(classLocations={})}var courseList=["CBS"],classList=[],shadowList={},classLocations={};!function(){"use strict";function t(){var t=function(s){return function(t,e){var a=[],i=[],o=courseList;t=t.toLowerCase(),$.each(s,function(s,e){if(o.indexOf(s)>=0)return!0;var c=s+" - "+e,n=c.toLowerCase().indexOf(t);n>0?a.push(c):0===n&&i.push(c)}),i.sort(),i.length<10&&a.length>0&&(a.sort(),i=i.concat(a)),e(i.slice(0,10))}};$(".typeahead.coursein").typeahead({name:"courses",source:t(s)})}var s;$.getJSON("data/courses.json",function(e){s=e,$(document).ready(function(){t(),$("#showcap").change(function(){var s=$(".class-capacity");document.getElementById("showcap").checked===!0?s.show():s.hide()})})})}(),$.fn.push=function(s){"use strict";return Array.prototype.push.apply(this,$.makeArray($(s))),this};
