function fetchData(t){"use strict";var e="courses="+encodeURI(JSON.stringify(courseList)),i=[];$.getJSON("data.php",e,function(e){var s={};!function(){var t,i,n,r,o,a,l;for(t in e)if(e.hasOwnProperty(t)&&(s[t]={},i=e[t],null!==i))for(a=0;a<i.length;a+=1){for(n=i[a],r=n[3],o=[],l=0;l<r.length;l+=1)o.push(r[l][0]);o=o.join(","),s[t].hasOwnProperty(n[0])||(s[t][n[0]]=[]),0!==o.length&&s[t][n[0]].push([o,n[1],n[2],t,n[0]])}}(),s.CBS={},$("#tbt").is(":checked")&&(s.CBS.TBT=[["T 12","O","0,1","CBS","The Bible Talks"],["T 13","O","0,1","CBS","The Bible Talks"],["H 12","O","0,1","CBS","The Bible Talks"],["H 13","O","0,1","CBS","The Bible Talks"]]),$("#cth").is(":checked")&&(s.CBS.CoreTheo=[["T 17","O","0,1","CBS","Core Theology"],["W 13","O","0,1","CBS","Core Theology"]]),$("#ctr").is(":checked")&&(s.CBS.CoreTrain=[["T 16","O","0,1","CBS","Core Training"],["T 18","O","0,1","CBS","Core Training"],["W 12","O","0,1","CBS","Core Training"],["W 14","O","0,1","CBS","Core Training"]]),$("#bib").is(":checked")&&(s.CBS.BibleStudy=[["M 11","O","0,1","CBS","Bible Study"],["M 12","O","0,1","CBS","Bible Study"],["M 13","O","0,1","CBS","Bible Study"],["M 14","O","0,1","CBS","Bible Study"],["T 11","O","0,1","CBS","Bible Study"],["T 14","O","0,1","CBS","Bible Study"],["W 11","O","0,1","CBS","Bible Study"],["H 11","O","0,1","CBS","Bible Study"],["H 14","O","0,1","CBS","Bible Study"]]),function(){var t,e;for(t in s)if(s.hasOwnProperty(t))for(e in s[t])s[t].hasOwnProperty(e)&&i.push([s[t][e],s[t][e].length]);i.sort(function(t,e){return t[1]-e[1]}),i=i.map(function(t){return t[0]}),i=i.map(function(t){return t.map(function(t){var e=t[0].split(","),i=e.map(function(t){var e=t.replace(/[^\d\-.]/g,"").split("-");return 1===e.length&&(e[1]=+e[0]+1),[t[0],+e[0],+e[1]]});return t[0]=i,t})})}(),t(i)})}function generate(){"use strict";function t(t){var e={M:120,T:100,W:180,H:100,F:150},i={M:!1,T:!1,W:!1,H:!1,F:!1},s=-20,n=-20,r=-40,o=100,a=75,l=100,u=0;return function(){var r,s=t.map(function(t){return t[0][0]}),n=s.join("");for(r in e)e.hasOwnProperty(r)&&-1===n.indexOf(r)&&(u+=e[r],i[r]=!0);return u}(),function(){var e,i;for(i=0;i<t.length;i+=1)e=t[i][0],e[1]<10&&(u+=s),e[2]>=17&&(u+=n),e[2]>=20&&(u+=r);return u}(),function(){var e,s,n,r,c;for(e=0;e<t.length;e+=1)"The Bible Talks"===t[e][4]&&(s=t[e][0][0]),"Core Theology"===t[e][4]&&(n=t[e][0][0]),"Core Training"===t[e][4]&&(r=t[e][0][0]),"Bible Study"===t[e][4]&&(c=t[e][0][0]);s&&(u+=(1+!i[s])*o),n&&(u+=(1+!i[n])*a),r&&(u+=(1+!i[r])*a),c&&(u+=(1+!i[c])*l)}(),u}function e(t){var e,i,s;for(e=t.length-1;e>0;e-=1)i=Math.floor(Math.random()*(e+1)),s=t[e],t[e]=t[i],t[i]=s;return t}fetchData(function(i){function s(t,e){return t[0]!==e[0]?!1:t[1]>=e[2]||e[1]>=t[2]?!1:!0}function n(t,e,i){var n,r,o,a,l;for(n=0;n<i.length;n+=1)for(r=0;r<e.length;r+=1)for(a=t[r][e[r]],l=a[0],o=0;o<l.length;o+=1)if(s(i[n],l[o]))return!0;return!1}function r(t){for(var s,r,e=[],i=0;i<t.length;){for(s=t[i],r=e[i]+1||0;r<s.length&&n(t,e,s[r][0]);)r+=1;if(r===s.length){if(e[i]=0,e.pop(),i-=1,0>i)return null}else e[i]=r,i+=1}return e.map(function(e,i){return t[i][e]})}function o(s){s=void 0!==s?s:1e3;var n,o,l,c,u,a={score:-(1/0),timetable:[]};for(n=0;s>n;n+=1){for(u=i.slice(),o=0;o<u.length;o+=1)e(u[o]);if(l=r(u),null===l){0===n&&console.error("Could not generate timetable! Some clashes could not be resolved.");break}c=t(l),c>a.score&&(a.score=c,a.timetable=l)}return a.timetable}var l,c,u,f,d,a=o();for(l=0;l<classList.length;l+=1)classList[l].remove();for($(".class-shadow").remove(),clearLists(),f=[],l=0;l<a.length;l+=1)u=a[l],d=courseList.indexOf(u[3]),createClass(u[0],u[3],u[4],d,f);for(f={},l=0;l<i.length;l+=1)for(c=0;c<i[l].length;c+=1)d=courseList.indexOf(i[l][c][3]),createShadow(i[l][c][0],i[l][c][3]+i[l][c][4],d,f)})}
