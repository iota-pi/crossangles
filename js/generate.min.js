function generate(t){"use strict";function e(){var i,n,o,s,r,a,l,e={};for(i in t)if(t.hasOwnProperty(i))for(e[i]={},n=t[i],a=0;a<n.length;a+=1){for(o=n[a],s=o[3],r=[],l=0;l<s.length;l+=1)r.push(s[l][0]);r=r.join(","),e[i].hasOwnProperty(o[0])||(e[i][o[0]]=[]),e[i][o[0]].push([r,o[1],o[2],i,o[0]])}return e}function i(t,e){function h(t,e){var n=t[0].replace(/[^\d\-,.]/g,"").split(/[,\-]/).map(function(t){return Math.ceil(+t)}),o=e[0].replace(/[^\d\-,.]/g,"").split(/[,\-]/).map(function(t){return Math.ceil(+t)}),s=function(t){return i.indexOf(t)},r=Math.max.apply(null,n.map(s)),a=Math.max.apply(null,o.map(s));return r-a}function f(t,e){var i=t[0].replace(/[\d\- ]/g,"").split(","),o=e[0].replace(/[\d\- ]/g,"").split(","),s=function(t){return n.indexOf(t)},r=Math.max.apply(null,i.map(s)),a=Math.max.apply(null,o.map(s));return r-a}function p(t,e){return t[1]===e[1]?0:"O"===t[1]?-1:1}var a,l,i=[12,13,14,11,15,16,10,17,18,19,20,9,21,22,23,8,7,6,5,4,3,2,1,0],n=["M","T","H","F","W","S","s"];for(a=0,l=[p,h,f];0===a&&(a=l.shift()(t,e),0!==l.length););return a}function a(t,e){return t[0]!==e[0]?!1:(t=t.replace(/[^\d\-.]/g,"").split("-"),e=e.replace(/[^\d\-.]/g,"").split("-"),1===t.length&&(t[1]=t[0]),1===e.length&&(e[1]=e[0]),t[0]>=e[1]&&t[0]>e[0]||e[0]>=t[1]&&e[0]>t[0]?!1:!0)}function l(t,e){var i,n,s,r,l,h=e.split(",");for(i=0;i<h.length;i+=1)for(n=0;n<t.length;n+=1)for(r=o[n][t[n]],l=r[0].split(","),s=0;s<l.length;s+=1)if(a(h[i],l[s]))return!0;return!1}function h(){for(var i,n,t=[],e=0;e<o.length;){for(i=o[e],n=t[e]||0;l(t,i[n][0])&&(n+=1,n!==i.length););if(n===i.length){if(t[e]=0,t.pop(),e-=1,0>e)return console.error("Could not generate timetable! Some clashes could not be resolved."),null}else t[e]=n,e+=1}return t=t.map(function(t,e){return o[e][t]})}var s,r,n=e(),o=[];for(s in n)if(n.hasOwnProperty(s))for(r in n[s])n[s].hasOwnProperty(r)&&o.push([n[s][r].sort(i),n[s][r].length]);o.sort(function(t,e){return t[1]-e[1]}),o=o.map(function(t){return t[0]}),console.log(h())}function generateTimetable(){"use strict";var t="courses="+encodeURI(JSON.stringify(courseList));$.getJSON("data.php",t,generate)}
