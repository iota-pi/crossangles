function fetchData(e){"use strict";var t="courses="+encodeURI(JSON.stringify(courseList)),i=[];$.getJSON("data.php",t,function(t){var r={};!function(){var e,i,n,o,s,a,l;for(e in t)if(t.hasOwnProperty(e)&&(r[e]={},i=t[e],null!==i))for(a=0;a<i.length;a+=1){for(n=i[a],o=n[3],s=[],l=0;l<o.length;l+=1)s.push(o[l][0]);s=s.join(","),r[e].hasOwnProperty(n[0])||(r[e][n[0]]=[]),0!==s.length&&r[e][n[0]].push([s,n[1],n[2],e,n[0]])}}(),r.CBS={},$("#tbt").is(":checked")&&(r.CBS.TBT=[["T 12","O","0,1","CBS","The Bible Talks"],["T 13","O","0,1","CBS","The Bible Talks"],["H 12","O","0,1","CBS","The Bible Talks"],["H 13","O","0,1","CBS","The Bible Talks"]]),$("#cth").is(":checked")&&(r.CBS.CoreTheo=[["T 17","O","0,1","CBS","Core Theology"],["W 13","O","0,1","CBS","Core Theology"]]),$("#ctr").is(":checked")&&(r.CBS.CoreTrain=[["T 16","O","0,1","CBS","Core Training"],["T 18","O","0,1","CBS","Core Training"],["W 12","O","0,1","CBS","Core Training"],["W 14","O","0,1","CBS","Core Training"]]),$("#bib").is(":checked")&&(r.CBS.BibleStudy=[["M 11","O","0,1","CBS","Bible Study"],["M 12","O","0,1","CBS","Bible Study"],["M 13","O","0,1","CBS","Bible Study"],["M 14","O","0,1","CBS","Bible Study"],["T 11","O","0,1","CBS","Bible Study"],["T 14","O","0,1","CBS","Bible Study"],["W 11","O","0,1","CBS","Bible Study"],["H 11","O","0,1","CBS","Bible Study"],["H 14","O","0,1","CBS","Bible Study"]]),function(){var e,t;for(e in r)if(r.hasOwnProperty(e))for(t in r[e])r[e].hasOwnProperty(t)&&i.push([r[e][t],r[e][t].length]);i.sort(function(e,t){return e[1]-t[1]}),i=i.map(function(e){return e[0]}),i=i.map(function(e){return e.map(function(e){var t=e[0].split(","),i=t.map(function(e){var t=e.replace(/[^\d\-.]/g,"").split("-");return 1===t.length&&(t[1]=+t[0]+1),[e[0],+t[0],+t[1]]});return e[0]=i,e})})}(),e(i)})}function generate(){"use strict";function e(e){var t={M:120,T:100,W:180,H:100,F:150},i={M:!1,T:!1,W:!1,H:!1,F:!1},r=-30,n=-30,o=-50,s=150,a=100,l=150,f=100,u=0;return function(){var o,r=e.map(function(e){return e[0][0]}),n=r.join("");for(o in t)t.hasOwnProperty(o)&&-1===n.indexOf(o)&&(u+=t[o],i[o]=!0);return u}(),function(){var t,i;for(i=0;i<e.length;i+=1)t=e[i][0],t[1]<10&&(u+=r),t[2]>17&&(u+=n),t[2]>19&&(u+=o);return u}(),function(){var t,r,n,o,f;for(t=0;t<e.length;t+=1)"The Bible Talks"===e[t][4]&&(r=e[t][0][0]),"Core Theology"===e[t][4]&&(n=e[t][0][0]),"Core Training"===e[t][4]&&(o=e[t][0][0]),"Bible Study"===e[t][4]&&(f=e[t][0][0]);r&&(u+=(1+!i[r])*s),n&&(u+=(1+!i[n])*a),o&&(u+=(1+!i[o])*a),f&&(u+=(1+!i[f])*l)}(),function(){var t,i,r,n;for(t=0;t<e.length;t+=1)if("CBS"===e[t][3])for(r=e[t][0],i=0;i<e.length;i+=1)if("CBS"!==e[i][3]&&(n=e[i][0],r[0]===n[1]&&(r[1]===n[2]||r[2]===n[1]))){u+=f;break}}(),u}function t(e){var t,i,r;for(t=e.length-1;t>0;t-=1)i=Math.floor(Math.random()*(t+1)),r=e[t],e[t]=e[i],e[i]=r;return e}fetchData(function(i){function r(e,t){return e[0]!==t[0]?!1:e[1]>=t[2]||t[1]>=e[2]?!1:!0}function n(e,t,i){var n,o,s,a,l;for(n=0;n<i.length;n+=1)for(o=0;o<t.length;o+=1)for(a=e[o][t[o]],l=a[0],s=0;s<l.length;s+=1)if(r(i[n],l[s]))return!0;return!1}function o(e){for(var r,o,t=[],i=0;i<e.length;){for(r=e[i],o=t[i]+1||0;o<r.length&&n(e,t,r[o][0]);)o+=1;if(o===r.length){if(t[i]=0,t.pop(),i-=1,0>i)return null}else t[i]=o,i+=1}return t.map(function(t,i){return e[i][t]})}function s(r){r=void 0!==r?r:1e3;var n,s,l,f,u,a={score:-(1/0),timetable:[]};for(n=0;r>n;n+=1){for(u=i.slice(),s=0;s<u.length;s+=1)t(u[s]);if(l=o(u),null===l){0===n&&console.error("Could not generate timetable! Some clashes could not be resolved.");break}f=e(l),f>a.score&&(a.score=f,a.timetable=l)}return a.timetable}var l,f,u,c,h,a=s();for(l=0;l<classList.length;l+=1)classList[l].remove();for($(".class-shadow").remove(),clearLists(),c=[],l=0;l<a.length;l+=1)u=a[l],h=courseList.indexOf(u[3]),createClass(u[0],u[3],u[4],h,c);for(c={},l=0;l<i.length;l+=1)for(f=0;f<i[l].length;f+=1)h=courseList.indexOf(i[l][f][3]),createShadow(i[l][f][0],i[l][f][3]+i[l][f][4],h,c)})}
