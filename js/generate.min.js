function fetchData(e){"use strict";var t="courses="+encodeURI(JSON.stringify(courseList)),s=[];$.getJSON("data.php",t,function(t){var o={};!function(){function u(e){return e.filter(function(t,s){return e.indexOf(t)===s})}var e,s,n,i,r,c,a;for(e in t)if(t.hasOwnProperty(e)&&(o[e]={},s=t[e],null!==s))for(c=0;c<s.length;c+=1){for(n=s[c],i=n[3],r=[],a=0;a<i.length;a+=1)r.push(i[a][0]);r=u(r),r=r.join(","),0!==r.length&&(o[e].hasOwnProperty(n[0])||(o[e][n[0]]=[]),o[e][n[0]].push({time:r,status:n[1],enrols:n[2],course:e,component:n[0]}))}}(),o.CBS={},$("#tbt").is(":checked")&&(o.CBS.TBT=[{time:"T 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"T 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"H 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"H 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"}]),$("#cth").is(":checked")&&(o.CBS.CoreTheo=[{time:"T 17",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology"},{time:"W 13",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology"}]),$("#ctr").is(":checked")&&(o.CBS.CoreTrain=[{time:"T 16",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"T 18",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"W 12",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"W 14",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"}]),$("#bib").is(":checked")&&(o.CBS.BibleStudy=[{time:"M 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 12",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 13",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"T 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"T 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"W 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"H 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"H 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"}]),function(){var e,t;for(e in o)if(o.hasOwnProperty(e))for(t in o[e])o[e].hasOwnProperty(t)&&s.push([o[e][t],o[e][t].length]);s.sort(function(e,t){return e[1]-t[1]}),s=s.map(function(e){return e[0]}),s=s.map(function(e){return e.map(function(e){var t=e.time.split(","),s=t.map(function(e){var t=e.replace(/[^\d\-.]/g,"").split("-");return 1===t.length&&(t[1]=+t[0]+1),[e[0],+t[0],+t[1]]});return e.time=s,e})})}(),function(){s=s.map(function(e){return e.filter(function(e){var o,t=e.time,s="MTWHF";for(o=0;o<t.length;o+=1)if(-1===s.indexOf(t[o][0]))return!1;return!0})})}(),function(){var e,t,o,n,i,r,c,a,u;for(t=0;t<s.length;t+=1){for(n=s[t],e={},o=0;o<n.length;o+=1)i=n[o],r=i.time.join(","),e.hasOwnProperty(r)?(c=e[r],"O"===i.status&&"O"!==c.status?e[r]=i:"F"===i.status&&"O"!==c.status&&"F"!==c.status?e[r]=i:(a=i.enrols.split(","),u=c.enrols.split(","),a[1]-a[0]<u[1]-u[0]&&(e[r]=i))):e[r]=i;s[t]=[];for(r in e)e.hasOwnProperty(r)&&s[t].push(e[r])}}(),function(){var e,t,o;for(e=0;e<s.length;e+=1)for(o=s[e],t=o.length-1;t>=0;t-=1)$("#fullclasses").is(":checked")?"O"!==o[t].status&&"F"!==o[t].status&&o.splice(t,1):"O"!==o[t].status&&o.splice(t,1)}(),s.sort(function(e,t){return e.length-t.length}),e(s)})}function generate(e,t){"use strict";function o(o){var i,r,c,a,u,n=search(o,0,s);if(e&&null!==n){for(i=0;i<classList.length;i+=1)classList[i].remove();for($(".class-shadow").remove(),clearLists(t),a=[],i=0;i<n.length;i+=1)c=n[i],u=courseList.indexOf(c.course),createClass(c.time,c.enrols,c.course,c.component,u,a);for(a={},i=0;i<o.length;i+=1)for(r=0;r<o[i].length;r+=1)u=courseList.indexOf(o[i][r].course),createShadow(o[i][r].time,o[i][r].course+o[i][r].component,u,o[i][r].enrols,a);t?restoreClasses():saveState()}}e!==!1&&(e=!0),t!==!0&&(t=!1);var s=+t||void 0;fetchData(o)}
