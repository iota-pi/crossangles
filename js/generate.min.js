function fetchData(n){"use strict";var t="courses="+encodeURI(JSON.stringify(courseList)),e=[];$.getJSON("data.php",t,function(t){function l(n,t){function f(n,t){var r=n[0].replace(/[^\d\-,.]/g,"").split(/[,\-]/).map(function(n){return Math.ceil(+n)}),l=t[0].replace(/[^\d\-,.]/g,"").split(/[,\-]/).map(function(n){return Math.ceil(+n)}),i=function(n){return e.indexOf(n)},a=Math.max.apply(null,r.map(i)),o=Math.max.apply(null,l.map(i));return a-o}function p(n,t){var e=n[0].replace(/[\d\- ]/g,"").split(","),l=t[0].replace(/[\d\- ]/g,"").split(","),i=function(n){return r.indexOf(n)},a=Math.max.apply(null,e.map(i)),o=Math.max.apply(null,l.map(i));return a-o}function c(n,t){return n[1]===t[1]?0:"O"===n[1]?-1:1}var o,u,e=[12,13,14,11,15,16,10,17,18,19,20,9,21,22,23,8,7,6,5,4,3,2,1,0],r=["M","T","H","F","W","S","s"];for(o=0,u=[c,f,p];0===o&&(o=u.shift()(n,t),0!==u.length););return o}var r={};!function(){var n,e,l,i,a,o,u;for(n in t)if(t.hasOwnProperty(n))for(r[n]={},e=t[n],o=0;o<e.length;o+=1){for(l=e[o],i=l[3],a=[],u=0;u<i.length;u+=1)a.push(i[u][0]);a=a.join(","),r[n].hasOwnProperty(l[0])||(r[n][l[0]]=[]),r[n][l[0]].push([a,l[1],l[2],n,l[0]])}}(),function(){var n,t;for(n in r)if(r.hasOwnProperty(n))for(t in r[n])r[n].hasOwnProperty(t)&&e.push([r[n][t].sort(l),r[n][t].length]);e.sort(function(n,t){return n[1]-t[1]}),e=e.map(function(n){return n[0]})}(),n(e)})}function generate(){"use strict";fetchData(function(n){function t(n,t){return n[0]!==t[0]?!1:(n=n.replace(/[^\d\-.]/g,"").split("-"),t=t.replace(/[^\d\-.]/g,"").split("-"),1===n.length&&(n[1]=n[0]),1===t.length&&(t[1]=t[0]),n[0]>=t[1]&&n[0]>t[0]||t[0]>=n[1]&&t[0]>n[0]?!1:!0)}function e(e,r){var l,i,a,o,u,f=r.split(",");for(l=0;l<f.length;l+=1)for(i=0;i<e.length;i+=1)for(o=n[i][e[i]],u=o[0].split(","),a=0;a<u.length;a+=1)if(t(f[l],u[a]))return!0;return!1}function r(){for(var l,i,t=[],r=0;r<n.length;){for(l=n[r],i=t[r]||0;e(t,l[i][0])&&(i+=1,i!==l.length););if(i===l.length){if(t[r]=0,t.pop(),r-=1,0>r)return console.error("Could not generate timetable! Some clashes could not be resolved."),null}else t[r]=i,r+=1}return t=t.map(function(t,e){return n[e][t]})}console.log("dfs:",r())})}
