function fetchData(t){"use strict";var e="courses="+encodeURI(JSON.stringify(courseList)),s=[];$.getJSON("data.php",e,function(e){var i={};!function(){var t,s,r,n,o,a,c;for(t in e)if(e.hasOwnProperty(t)&&(i[t]={},s=e[t],null!==s))for(a=0;a<s.length;a+=1){for(r=s[a],n=r[3],o=[],c=0;c<n.length;c+=1)o.push(n[c][0]);o=o.join(","),i[t].hasOwnProperty(r[0])||(i[t][r[0]]=[]),0!==o.length&&i[t][r[0]].push([o,r[1],r[2],t,r[0]])}}(),i.CBS={},$("#tbt").is(":checked")&&(i.CBS.TBT=[["T 12","O","0,1","CBS","The Bible Talks"],["T 13","O","0,1","CBS","The Bible Talks"],["H 12","O","0,1","CBS","The Bible Talks"],["H 13","O","0,1","CBS","The Bible Talks"]]),$("#cth").is(":checked")&&(i.CBS.CoreTheo=[["T 17","O","0,1","CBS","Core Theology"],["W 13","O","0,1","CBS","Core Theology"]]),$("#ctr").is(":checked")&&(i.CBS.CoreTrain=[["T 16","O","0,1","CBS","Core Training"],["T 18","O","0,1","CBS","Core Training"],["W 12","O","0,1","CBS","Core Training"],["W 14","O","0,1","CBS","Core Training"]]),$("#bib").is(":checked")&&(i.CBS.BibleStudy=[["M 11","O","0,1","CBS","Bible Study"],["M 12","O","0,1","CBS","Bible Study"],["M 13","O","0,1","CBS","Bible Study"],["M 14","O","0,1","CBS","Bible Study"],["T 11","O","0,1","CBS","Bible Study"],["T 14","O","0,1","CBS","Bible Study"],["W 11","O","0,1","CBS","Bible Study"],["H 11","O","0,1","CBS","Bible Study"],["H 14","O","0,1","CBS","Bible Study"]]),function(){var t,e;for(t in i)if(i.hasOwnProperty(t))for(e in i[t])i[t].hasOwnProperty(e)&&s.push([i[t][e],i[t][e].length]);s.sort(function(t,e){return t[1]-e[1]}),s=s.map(function(t){return t[0]}),s=s.map(function(t){return t.map(function(t){var e=t[0].split(","),s=e.map(function(t){var e=t.replace(/[^\d\-.]/g,"").split("-");return 1===e.length&&(e[1]=+e[0]+1),[t[0],+e[0],+e[1]]});return t[0]=s,t})})}(),t(s)})}function generate(){"use strict";function t(t){var e={M:120,T:100,W:180,H:100,F:150},s={M:!1,T:!1,W:!1,H:!1,F:!1},i=-20,r=-20,n=-40,o=100,a=75,c=100,l=0;return function(){var n,i=t.map(function(t){return t[0][0]}),r=i.join("");for(n in e)e.hasOwnProperty(n)&&-1===r.indexOf(n)&&(l+=e[n],s[n]=!0);return l}(),function(){var e,s;for(s=0;s<t.length;s+=1)e=t[s][0],e[1]<10&&(l+=i),e[2]>=17&&(l+=r),e[2]>=20&&(l+=n);return l}(),function(){var e,i,r,n,u;for(e=0;e<t.length;e+=1)"The Bible Talks"===t[e][4]&&(i=t[e][0][0]),"Core Theology"===t[e][4]&&(r=t[e][0][0]),"Core Training"===t[e][4]&&(n=t[e][0][0]),"Bible Study"===t[e][4]&&(u=t[e][0][0]);i&&(l+=(1+!s[i])*o),r&&(l+=(1+!s[r])*a),n&&(l+=(1+!s[n])*a),u&&(l+=(1+!s[u])*c)}(),l}function e(t){var e,s,i;for(e=t.length-1;e>0;e-=1)s=Math.floor(Math.random()*(e+1)),i=t[e],t[e]=t[s],t[s]=i;return t}fetchData(function(s){function i(t,e){return t[0]!==e[0]?!1:t[1]>=e[2]||e[1]>=t[2]?!1:!0}function r(t,e,s){var r,n,o,a,c;for(r=0;r<s.length;r+=1)for(n=0;n<e.length;n+=1)for(a=t[n][e[n]],c=a[0],o=0;o<c.length;o+=1)if(i(s[r],c[o]))return!0;return!1}function n(t){for(var i,n,e=[],s=0;s<t.length;){for(i=t[s],n=e[s]+1||0;n<i.length&&r(t,e,i[n][0]);)n+=1;if(n===i.length){if(e[s]=0,e.pop(),s-=1,0>s)return null}else e[s]=n,s+=1}return e.map(function(e,s){return t[s][e]})}function o(i){i=void 0!==i?i:1e3;var r,o,c,u,l,a={score:-(1/0),timetable:[]};for(r=0;i>r;r+=1){for(l=s.slice(),o=0;o<l.length;o+=1)e(l[o]);if(c=n(l),null===c){0===r&&console.error("Could not generate timetable! Some clashes could not be resolved.");break}u=t(c),u>a.score&&(a.score=u,a.timetable=c)}return console.log("Generated timetable with score",a.score),a.timetable}console.log(s);var c,u,l,d,h,a=o();for(c=0;c<classList.length;c+=1)classList[c].remove();for($(".class-shadow").remove(),clearLists(),d=[],c=0;c<a.length;c+=1)l=a[c],h=courseList.indexOf(l[3]),createClass(l[0],l[3],l[4],h,d);for(d={},c=0;c<s.length;c+=1)for(u=0;u<s[c].length;u+=1)h=courseList.indexOf(s[c][u][3]),createShadow(s[c][u][0],s[c][u][3]+s[c][u][4],h,d)})}
