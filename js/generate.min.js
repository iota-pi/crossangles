function fetchData(e){"use strict";var t="courses="+encodeURI(JSON.stringify(courseList)),s=[];$.getJSON("data.php",t,function(t){var c={};!function(){function d(e){return e.filter(function(t,s){return e.map(String).indexOf(String(t))===s})}var e,s,i,o,n,a,r,l;for(e in t)if(t.hasOwnProperty(e)&&(c[e]={},s=t[e],null!==s))for(r=0;r<s.length;r+=1){for(i=s[r],o=i[3],o=d(o),n=[],a=[],l=0;l<o.length;l+=1)n.push(o[l][0]),a.push(o[l][1]);n=n.join(","),0!==n.length&&(c[e].hasOwnProperty(i[0])||(c[e][i[0]]=[]),c[e][i[0]].push({time:n,status:i[1],enrols:i[2],course:e,component:i[0],location:a}))}}(),c.CBS={},$("#tbt").is(":checked")&&(c.CBS.TBT=[{time:"T 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks",location:["Elec Eng 418"]},{time:"T 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks",location:["Elec Eng 418"]},{time:"H 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks",location:["Rup Myers Theatre"]},{time:"H 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks",location:["Rup Myers Theatre"]}]),$("#cth").is(":checked")&&(c.CBS.CoreTheo=[{time:"T 17",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology",location:["Colombo C"]},{time:"W 13",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology",location:["CLB 4"]}]),$("#ctr").is(":checked")&&(c.CBS.CoreTrain=[{time:"T 16",status:"O",enrols:"0,1",course:"CBS",component:"Core Training",location:["Quad Sundial"]},{time:"T 18",status:"O",enrols:"0,1",course:"CBS",component:"Core Training",location:["Quad Sundial"]},{time:"W 12",status:"O",enrols:"0,1",course:"CBS",component:"Core Training",location:["Quad Sundial"]},{time:"W 14",status:"O",enrols:"0,1",course:"CBS",component:"Core Training",location:["Quad Sundial"]}]),$("#bib").is(":checked")&&(c.CBS.BibleStudy=[{time:"M 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"M 12",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"M 13",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"M 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"T 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"T 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"W 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"H 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"H 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]}]),function(){var e,t;for(e in c)if(c.hasOwnProperty(e))for(t in c[e])c[e].hasOwnProperty(t)&&s.push([c[e][t],c[e][t].length]);s.sort(function(e,t){return e[1]-t[1]}),s=s.map(function(e){return e[0]}),s=s.map(function(e){return e.map(function(e){var t=e.time.split(","),s=t.map(function(e){var t=-1!==e.indexOf("#"),s=e.replace(/[^\d\-.]/g,"").split("-");return 1===s.length&&(s[1]=+s[0]+1),[e[0],+s[0],+s[1],t]});return e.time=s,e})})}(),function(){s=s.map(function(e){return e.filter(function(e){var c,t=e.time,s="MTWHF";for(c=0;c<t.length;c+=1)if(-1===s.indexOf(t[c][0]))return!1;return!0})})}(),function(){var e,t,c,i,o,n,a,r,l;for(t=0;t<s.length;t+=1){for(i=s[t],e={},c=0;c<i.length;c+=1)o=i[c],n=o.time.join(","),e.hasOwnProperty(n)?(a=e[n],"O"===o.status&&"O"!==a.status?e[n]=o:"F"===o.status&&"O"!==a.status&&"F"!==a.status?e[n]=o:(r=o.enrols.split(","),l=a.enrols.split(","),r[1]-r[0]<l[1]-l[0]&&(e[n]=o))):e[n]=o;s[t]=[];for(n in e)e.hasOwnProperty(n)&&s[t].push(e[n])}}(),function(){var e,t,c;for(e=0;e<s.length;e+=1)for(c=s[e],t=c.length-1;t>=0;t-=1)$("#fullclasses").is(":checked")?"O"!==c[t].status&&"F"!==c[t].status&&c.splice(t,1):"O"!==c[t].status&&c.splice(t,1)}(),s.sort(function(e,t){return e.length-t.length}),e(s)})}function generate(e,t){"use strict";function a(a){var l,d,u,h,f,r=search(a,c,s);if(e&&null!==r){for(l=0;l<classList.length;l+=1)classList[l].remove();for($(".class-shadow").remove(),clearLists(t),h=[],l=0;l<r.length;l+=1)u=r[l],f=courseList.indexOf(u.course),createClass(u,f,h);for(h={},l=0;l<a.length;l+=1)for(d=0;d<a[l].length;d+=1)f=courseList.indexOf(a[l][d].course),i=createShadow(a[l][d],f,h),o=Math.min(o,i),n=Math.min(n,i);t?restoreClasses():saveState(),hideEmpty(o,n)}}e!==!1&&(e=!0),t!==!0&&(t=!1);var i,s=t?0:void 0,c=100*+document.getElementById("canclash").checked,o=1/0,n=-(1/0);fetchData(a)}
