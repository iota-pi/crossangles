function fetchData(t){"use strict";var e="courses="+encodeURI(JSON.stringify(courseList)),s=[];$.getJSON("data.php",e,function(e){var c={};!function(){function d(t){return t.filter(function(e,s){return t.indexOf(e)===s})}var t,s,i,a,o,n,r;for(t in e)if(e.hasOwnProperty(t)&&(c[t]={},s=e[t],null!==s))for(n=0;n<s.length;n+=1){for(i=s[n],a=i[3],o=[],r=0;r<a.length;r+=1)o.push(a[r][0]);o=d(o),o=o.join(","),0!==o.length&&(c[t].hasOwnProperty(i[0])||(c[t][i[0]]=[]),c[t][i[0]].push({time:o,status:i[1],enrols:i[2],course:t,component:i[0]}))}}(),c.CBS={},$("#tbt").is(":checked")&&(c.CBS.TBT=[{time:"T 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"T 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"H 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"H 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"}]),$("#cth").is(":checked")&&(c.CBS.CoreTheo=[{time:"T 17",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology"},{time:"W 13",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology"}]),$("#ctr").is(":checked")&&(c.CBS.CoreTrain=[{time:"T 16",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"T 18",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"W 12",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"W 14",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"}]),$("#bib").is(":checked")&&(c.CBS.BibleStudy=[{time:"M 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 12",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 13",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"T 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"T 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"W 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"H 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"H 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"}]),function(){var t,e;for(t in c)if(c.hasOwnProperty(t))for(e in c[t])c[t].hasOwnProperty(e)&&s.push([c[t][e],c[t][e].length]);s.sort(function(t,e){return t[1]-e[1]}),s=s.map(function(t){return t[0]}),s=s.map(function(t){return t.map(function(t){var e=t.time.split(","),s=e.map(function(t){var e=t.replace(/[^\d\-.]/g,"").split("-");return 1===e.length&&(e[1]=+e[0]+1),[t[0],+e[0],+e[1]]});return t.time=s,t})})}(),function(){var t,e,c,i,a,o,n,r,d;for(e=0;e<s.length;e+=1){for(i=s[e],t={},c=0;c<i.length;c+=1)a=i[c],o=a.time.join(","),t.hasOwnProperty(o)?(n=t[o],"O"===a.status&&"O"!==n.status?t[o]=a:"F"===a.status&&"O"!==n.status&&"F"!==n.status?t[o]=a:(r=a.enrols.split(","),d=n.enrols.split(","),r[1]-r[0]<d[1]-d[0]&&(t[o]=a))):t[o]=a;s[e]=[];for(o in t)t.hasOwnProperty(o)&&s[e].push(t[o])}}(),function(){var t,e,c;for(t=0;t<s.length;t+=1)for(c=s[t],e=c.length-1;e>=0;e-=1)$("#fullclasses").is(":checked")?"O"!==c[e].status&&"F"!==c[e].status&&c.splice(e,1):"O"!==c[e].status&&c.splice(e,1)}(),s.sort(function(t,e){return t.length-e.length}),t(s)})}function generate(t,e){"use strict";function c(c){var a,o,n,r,d,i=search(c,0,s);if(t&&null!==i){for(a=0;a<classList.length;a+=1)classList[a].remove();for($(".class-shadow").remove(),clearLists(e),r=[],a=0;a<i.length;a+=1)n=i[a],d=courseList.indexOf(n.course),createClass(n.time,n.enrols,n.course,n.component,d,r);for(r={},a=0;a<c.length;a+=1)for(o=0;o<c[a].length;o+=1)d=courseList.indexOf(c[a][o].course),createShadow(c[a][o].time,c[a][o].course+c[a][o].component,d,c[a][o].enrols,r);e?restoreClasses():saveState()}}t!==!1&&(t=!0),e!==!0&&(e=!1);var s=+e||void 0;fetchData(c)}
