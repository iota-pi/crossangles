function scoreTime(e,t){"use strict";var r=4-Math.abs(14.5-(e+t)/2);return r*=Math.abs(r),r*=t-e}function evaluateTimetable(e){"use strict";var r,i,n,l,f,t=0,s={M:!1,T:!1,W:!1,H:!1,F:!1},o={M:!1,T:!1,W:!1,H:!1,F:!1},a=[],c={M:120,T:100,W:180,H:100,F:150},h=150,B=100,S=150;for(r=0;r<e.length;r+=1){for(n=e[r][0],i=0;i<n.length;i+=1)l=n[i],"CBS"===e[r][3]?(s[l[0]]=!0,a.push(l)):o[l[0]]=!0,t+=scoreTime(l[1],l[2]);"The Bible Talks"===e[r][4]?t+=h:"Core Theology"===e[r][4]||"Core Training"===e[r][4]?t+=B:"Bible Study"===e[r][4]&&(t+=S)}for(f in o)o.hasOwnProperty(f)&&o[f]===!1&&s[f]===!1&&(t+=c[f]);return t}function fetchData(e){"use strict";var t="courses="+encodeURI(JSON.stringify(courseList)),r=[];$.getJSON("data.php",t,function(t){var i={};!function(){var e,r,n,l,s,o,a;for(e in t)if(t.hasOwnProperty(e)&&(i[e]={},r=t[e],null!==r))for(o=0;o<r.length;o+=1){for(n=r[o],l=n[3],s=[],a=0;a<l.length;a+=1)s.push(l[a][0]);s=s.join(","),i[e].hasOwnProperty(n[0])||(i[e][n[0]]=[]),0!==s.length&&i[e][n[0]].push([s,n[1],n[2],e,n[0]])}}(),i.CBS={},$("#tbt").is(":checked")&&(i.CBS.TBT=[["T 12","O","0,1","CBS","The Bible Talks"],["T 13","O","0,1","CBS","The Bible Talks"],["H 12","O","0,1","CBS","The Bible Talks"],["H 13","O","0,1","CBS","The Bible Talks"]]),$("#cth").is(":checked")&&(i.CBS.CoreTheo=[["T 17","O","0,1","CBS","Core Theology"],["W 13","O","0,1","CBS","Core Theology"]]),$("#ctr").is(":checked")&&(i.CBS.CoreTrain=[["T 16","O","0,1","CBS","Core Training"],["T 18","O","0,1","CBS","Core Training"],["W 12","O","0,1","CBS","Core Training"],["W 14","O","0,1","CBS","Core Training"]]),$("#bib").is(":checked")&&(i.CBS.BibleStudy=[["M 11","O","0,1","CBS","Bible Study"],["M 12","O","0,1","CBS","Bible Study"],["M 13","O","0,1","CBS","Bible Study"],["M 14","O","0,1","CBS","Bible Study"],["T 11","O","0,1","CBS","Bible Study"],["T 14","O","0,1","CBS","Bible Study"],["W 11","O","0,1","CBS","Bible Study"],["H 11","O","0,1","CBS","Bible Study"],["H 14","O","0,1","CBS","Bible Study"]]),function(){var e,t;for(e in i)if(i.hasOwnProperty(e))for(t in i[e])i[e].hasOwnProperty(t)&&r.push([i[e][t],i[e][t].length]);r.sort(function(e,t){return e[1]-t[1]}),r=r.map(function(e){return e[0]}),r=r.map(function(e){return e.map(function(e){var t=e[0].split(","),r=t.map(function(e){var t=e.replace(/[^\d\-.]/g,"").split("-");return 1===t.length&&(t[1]=+t[0]+1),[e[0],+t[0],+t[1]]});return e[0]=r,e})})}(),function(){var e,t,i,n,l,s,o;for(t=0;t<r.length;t+=1){for(n=r[t],e={},i=0;i<n.length;i+=1)l=n[i],s=l[0],e.hasOwnProperty(s)?(o=e[s],"O"===l[1]&&"O"!==o[1]?e[l[0]]=l:l[2].split(",")[0]>o[2].split(",")[0]&&(e[l[0]]=l)):e[l[0]]=l;r[t]=[];for(s in e)e.hasOwnProperty(s)&&r[t].push(e[s])}}(),e(r)})}function generate(){"use strict";function r(e,t){function l(e,t){void 0===t&&(t=0);var a,f,u,i=e.length-t,n={timetable:null,score:null},s={timetable:null,score:null},o=[];if(console.log(t,i),i<r.length){if(r.hasOwnProperty(e))return r[i][e]}else r[i]={};if(1===i)n.timetable=[e[t]],n.score=evaluateTimetable(n.timetable),o=[n];else for(a=l(e,t+1),console.log(a,t+1),f=0;f<a.length;f+=1){for(u=0;u<e[t].length;u+=1)n.timetable=e[t][u]+a[f].timetable,n.score=evaluateTimetable(n.timetable),n.score>s.score&&(s.timetable=n.timetable,s.score=n.score);o.push($.extend({},s))}return console.log(r),r[i][e]=o,o}function s(e,t){return t}var i,n,r=[];for(i=[],n=0;n<e.length;n+=1)i[n]=e[n].map(s);return l(i),[]}fetchData(function(e){var i,n,l,s,o,t=r(e,0);for(i=0;i<classList.length;i+=1)classList[i].remove();for($(".class-shadow").remove(),clearLists(),s=[],i=0;i<t.length;i+=1)l=t[i],o=courseList.indexOf(l[3]),createClass(l[0],l[3],l[4],o,s);for(s={},i=0;i<e.length;i+=1)for(n=0;n<e[i].length;n+=1)o=courseList.indexOf(e[i][n][3]),createShadow(e[i][n][0],e[i][n][3]+e[i][n][4],o,s)})}
