function fetchData(e){"use strict";var t="courses="+encodeURI(JSON.stringify(courseList)),n=[];$.getJSON("data.php",t,function(t){function i(e,t){function l(e,t){var r=e[0].replace(/[^\d\-,.]/g,"").split(/[,\-]/).map(function(e){return Math.ceil(+e)}),i=t[0].replace(/[^\d\-,.]/g,"").split(/[,\-]/).map(function(e){return Math.ceil(+e)}),s=function(e){return n.indexOf(e)},o=Math.max.apply(null,r.map(s)),a=Math.max.apply(null,i.map(s));return o-a}function u(e,t){var n=e[0].replace(/[\d\- ]/g,"").split(","),i=t[0].replace(/[\d\- ]/g,"").split(","),s=function(e){return r.indexOf(e)},o=Math.max.apply(null,n.map(s)),a=Math.max.apply(null,i.map(s));return o-a}function f(e,t){return e[1]===t[1]?0:"O"===e[1]?-1:1}var a,c,n=[12,13,14,11,15,16,10,17,18,19,20,9,21,22,23,8,7,6,5,4,3,2,1,0],r=["M","T","H","F","W","S","s"];for(a=0,c=[f,l,u];0===a&&(a=c.shift()(e,t),0!==c.length););return a}var r={};!function(){var e,n,i,s,o,a,c;for(e in t)if(t.hasOwnProperty(e))for(r[e]={},n=t[e],a=0;a<n.length;a+=1){for(i=n[a],s=i[3],o=[],c=0;c<s.length;c+=1)o.push(s[c][0]);o=o.join(","),r[e].hasOwnProperty(i[0])||(r[e][i[0]]=[]),r[e][i[0]].push([o,i[1],i[2],e,i[0]])}}(),function(){var e,t;for(e in r)if(r.hasOwnProperty(e))for(t in r[e])r[e].hasOwnProperty(t)&&n.push([r[e][t].sort(i),r[e][t].length]);n.sort(function(e,t){return e[1]-t[1]}),n=n.map(function(e){return e[0]})}(),e(n)})}function generate(){"use strict";fetchData(function(e){function t(e,t){return e[0]!==t[0]?!1:(e=e.replace(/[^\d\-.]/g,"").split("-"),t=t.replace(/[^\d\-.]/g,"").split("-"),1===e.length&&(e[1]=e[0]),1===t.length&&(t[1]=t[0]),e[0]>=t[1]&&e[0]>t[0]||t[0]>=e[1]&&t[0]>e[0]?!1:!0)}function n(n,r){var i,s,o,a,c,l=r.split(",");for(i=0;i<l.length;i+=1)for(s=0;s<n.length;s+=1)for(a=e[s][n[s]],c=a[0].split(","),o=0;o<c.length;o+=1)if(t(l[i],c[o]))return!0;return!1}function r(){for(var i,s,t=[],r=0;r<e.length;){for(i=e[r],s=t[r]||0;n(t,i[s][0])&&(s+=1,s!==i.length););if(s===i.length){if(t[r]=0,t.pop(),r-=1,0>r)return console.error("Could not generate timetable! Some clashes could not be resolved."),null}else t[r]=s,r+=1}return t=t.map(function(t,n){return e[n][t]})}var s,o,a,c,i=r();for(s=0;s<classList.length;s+=1)classList[s].remove();for(s=0;s<i.length;s+=1)a=i[s],c=a[3]+": "+a[4],createClass(a[0],c);for(console.log(e),s=0;s<e.length;s+=1)for(o=0;o<e[s].length;o+=1)createShadow(e[s][o][0],e[s][o][3]+e[s][o][4])})}
