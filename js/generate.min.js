function fetchData(t){"use strict";var s="courses="+encodeURI(JSON.stringify(courseList)),e=[];$.getJSON("data.php",s,function(s){function a(t,s){function l(t,s){var i=t[0].replace(/[^\d\-,.]/g,"").split(/[,\-]/).map(function(t){return Math.ceil(+t)}),a=s[0].replace(/[^\d\-,.]/g,"").split(/[,\-]/).map(function(t){return Math.ceil(+t)}),r=function(t){return e.indexOf(t)},o=Math.max.apply(null,i.map(r)),n=Math.max.apply(null,a.map(r));return o-n}function d(t,s){var e=t[0].replace(/[\d\- ]/g,"").split(","),a=s[0].replace(/[\d\- ]/g,"").split(","),r=function(t){return i.indexOf(t)},o=Math.max.apply(null,e.map(r)),n=Math.max.apply(null,a.map(r));return o-n}function u(t,s){return t[1]===s[1]?0:"O"===t[1]?-1:1}var n,c,e=[12,13,14,11,15,16,10,17,18,19,20,9,21,22,23,8,7,6,5,4,3,2,1,0],i=["M","T","H","F","W","S","s"];for(n=0,c=[u,l,d];0===n&&(n=c.shift()(t,s),0!==c.length););return n}var i={};!function(){var t,e,a,r,o,n,c;for(t in s)if(s.hasOwnProperty(t))for(i[t]={},e=s[t],n=0;n<e.length;n+=1){for(a=e[n],r=a[3],o=[],c=0;c<r.length;c+=1)o.push(r[c][0]);o=o.join(","),i[t].hasOwnProperty(a[0])||(i[t][a[0]]=[]),i[t][a[0]].push([o,a[1],a[2],t,a[0]])}}(),function(){var t,s;for(t in i)if(i.hasOwnProperty(t))for(s in i[t])i[t].hasOwnProperty(s)&&e.push([i[t][s].sort(a),i[t][s].length]);e.sort(function(t,s){return t[1]-s[1]}),e=e.map(function(t){return t[0]})}(),t(e)})}function generate(){"use strict";fetchData(function(t){function s(t,s){return t[0]!==s[0]?!1:(t=t.replace(/[^\d\-.]/g,"").split("-"),s=s.replace(/[^\d\-.]/g,"").split("-"),1===t.length&&(t[1]=t[0]),1===s.length&&(s[1]=s[0]),t[0]>=s[1]&&t[0]>s[0]||s[0]>=t[1]&&s[0]>t[0]?!1:!0)}function e(e,i){var a,r,o,n,c,l=i.split(",");for(a=0;a<l.length;a+=1)for(r=0;r<e.length;r+=1)for(n=t[r][e[r]],c=n[0].split(","),o=0;o<c.length;o+=1)if(s(l[a],c[o]))return!0;return!1}function i(){for(var a,r,s=[],i=0;i<t.length;){for(a=t[i],r=s[i]||0;e(s,a[r][0])&&(r+=1,r!==a.length););if(r===a.length){if(s[i]=0,s.pop(),i-=1,0>i)return console.error("Could not generate timetable! Some clashes could not be resolved."),null}else s[i]=r,i+=1}return s=s.map(function(s,e){return t[e][s]})}var r,o,n,c,a=i();for(r=0;r<classList.length;r+=1)classList[r].remove();for(r=0;r<a.length;r+=1)n=a[r],createClass(n[0],n[3],n[4],courseList.index(n[3]));for(c=[],r=0;r<t.length;r+=1)for(o=0;o<t[r].length;o+=1)-1===c.indexOf(t[r][o][0]+t[r][o][3]+t[r][o][4])&&(c.push(t[r][o][0]+t[r][o][3]+t[r][o][4]),createShadow(t[r][o][0],t[r][o][3]+t[r][o][4],courseList.index(t[r][o][3])))})}
