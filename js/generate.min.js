function fetchData(e){"use strict";var t="courses="+encodeURI(JSON.stringify(courseList)),s=[];$.getJSON("data.php",t,function(t){var n={};!function(){function l(e){return e.filter(function(t,s){return e.indexOf(t)===s})}var e,s,o,r,i,u,c;for(e in t)if(t.hasOwnProperty(e)&&(n[e]={},s=t[e],null!==s))for(u=0;u<s.length;u+=1){for(o=s[u],r=o[3],i=[],c=0;c<r.length;c+=1)i.push(r[c][0]);i=l(i),i=i.join(","),0!==i.length&&(n[e].hasOwnProperty(o[0])||(n[e][o[0]]=[]),n[e][o[0]].push({time:i,status:o[1],enrols:o[2],course:e,component:o[0]}))}}(),n.CBS={},$("#tbt").is(":checked")&&(n.CBS.TBT=[{time:"T 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"T 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"H 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"H 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"}]),$("#cth").is(":checked")&&(n.CBS.CoreTheo=[{time:"T 17",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology"},{time:"W 13",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology"}]),$("#ctr").is(":checked")&&(n.CBS.CoreTrain=[{time:"T 16",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"T 18",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"W 12",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"W 14",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"}]),$("#bib").is(":checked")&&(n.CBS.BibleStudy=[{time:"M 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 12",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 13",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"T 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"T 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"W 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"H 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"H 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"}]),function(){var e,t;for(e in n)if(n.hasOwnProperty(e))for(t in n[e])n[e].hasOwnProperty(t)&&s.push([n[e][t],n[e][t].length]);s.sort(function(e,t){return e[1]-t[1]}),s=s.map(function(e){return e[0]}),s=s.map(function(e){return e.map(function(e){var t=e.time.split(","),s=t.map(function(e){var t=e.replace(/[^\d\-.]/g,"").split("-");return 1===t.length&&(t[1]=+t[0]+1),[e[0],+t[0],+t[1]]});return e.time=s,e})})}(),function(){var e,t,n,o,r,i,u,c,l;for(t=0;t<s.length;t+=1){for(o=s[t],e={},n=0;n<o.length;n+=1)r=o[n],i=r.time.join(","),e.hasOwnProperty(i)?(u=e[i],"O"===r.status&&"O"!==u.status?e[i]=r:"F"===r.status&&"O"!==u.status&&"F"!==u.status?e[i]=r:(c=r.enrols.split(","),l=u.enrols.split(","),c[1]-c[0]<l[1]-l[0]&&(e[i]=r))):e[i]=r;s[t]=[];for(i in e)e.hasOwnProperty(i)&&s[t].push(e[i])}}(),function(){var e,t,n;for(e=0;e<s.length;e+=1)for(n=s[e],t=n.length-1;t>=0;t-=1)$("#fullclasses").is(":checked")?"O"!==n[t].status&&"F"!==n[t].status&&n.splice(t,1):"O"!==n[t].status&&n.splice(t,1)}(),s.sort(function(e,t){return e.length-t.length}),e(s)})}function generate(e){"use strict";e!==!1&&(e=!0),fetchData(function(t){var n,o,r,i,u,s=search(t,0);if(console.log(t),e&&null!==s){for(n=0;n<classList.length;n+=1)classList[n].remove();for($(".class-shadow").remove(),clearLists(),i=[],n=0;n<s.length;n+=1)r=s[n],u=courseList.indexOf(r.course),createClass(r.time,r.enrols,r.course,r.component,u,i);for(i={},n=0;n<t.length;n+=1)for(o=0;o<t[n].length;o+=1)u=courseList.indexOf(t[n][o].course),createShadow(t[n][o].time,t[n][o].course+t[n][o].component,u,t[n][o].enrols,i)}})}
