function generate(e){"use strict";function n(){var t,r,l,i,a,u,o,n={};for(t in e)if(e.hasOwnProperty(t))for(n[t]={},r=e[t],u=0;u<r.length;u+=1){for(l=r[u],i=l[3],a=[],o=0;o<i.length;o+=1)a.push(i[o][0]);a=a.join(","),n[t].hasOwnProperty(l[0])||(n[t][l[0]]=[]),n[t][l[0]].push([a,l[1],l[2],t,l[0]])}return n}function t(e,n){function f(e,n){var r=e[0].replace(/[^\d\-,.]/g,"").split(/[,\-]/).map(function(e){return Math.ceil(+e)}),l=n[0].replace(/[^\d\-,.]/g,"").split(/[,\-]/).map(function(e){return Math.ceil(+e)}),i=function(e){return t.indexOf(e)},a=Math.max.apply(null,r.map(i)),u=Math.max.apply(null,l.map(i));return a-u}function p(e,n){var t=e[0].replace(/[\d\- ]/g,"").split(","),l=n[0].replace(/[\d\- ]/g,"").split(","),i=function(e){return r.indexOf(e)},a=Math.max.apply(null,t.map(i)),u=Math.max.apply(null,l.map(i));return a-u}function s(e,n){return e[1]===n[1]?0:"O"===e[1]?-1:1}var u,o,t=[12,13,14,11,15,16,10,17,18,19,20,9,21,22,23,8,7,6,5,4,3,2,1,0],r=["M","T","H","F","W","S","s"];for(u=0,o=[s,f,p];0===u&&(u=o.shift()(e,n),0!==o.length););return u}function i(e,n){return e[0]!==n[0]?!1:(e=e.replace(/[^\d\-.]/g,"").split("-"),n=n.replace(/[^\d\-.]/g,"").split("-"),1===e.length&&(e[1]=e[0]),1===n.length&&(n[1]=n[0]),e[0]>=n[1]&&e[0]>n[0]||n[0]>=e[1]&&n[0]>e[0]?!1:!0)}function a(e,n){var t,r,a,u,o,f=n.split(",");for(t=0;t<f.length;t+=1)for(r=0;r<e.length;r+=1)for(u=l[r][e[r]],o=u[0].split(","),a=0;a<o.length;a+=1)if(i(f[t],o[a]))return!0;return!1}function u(){for(var t,r,e=[],n=0;n<l.length;){for(t=l[n],r=e[n]||0;a(e,t[r][0])&&(r+=1,r!==t.length););if(r===t.length){if(e[n]=0,e.pop(),n-=1,0>n)return console.error("Could not generate timetable! Some clashes could not be resolved."),null}else e[n]=r,n+=1}return e=e.map(function(e,n){return l[n][e]})}var r=n(),l=[];!function(){var e,n;for(e in r)if(r.hasOwnProperty(e))for(n in r[e])r[e].hasOwnProperty(n)&&l.push([r[e][n].sort(t),r[e][n].length]);l.sort(function(e,n){return e[1]-n[1]}),l=l.map(function(e){return e[0]})}(),console.log(u())}function generateTimetable(){"use strict";var e="courses="+encodeURI(JSON.stringify(courseList));$.getJSON("data.php",e,generate)}
