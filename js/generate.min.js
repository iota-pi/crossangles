function fetchData(e){"use strict";var t="courses="+encodeURI(JSON.stringify(courseList)),s=[];$.getJSON("data.php",t,function(t){var i={};!function(){function l(e){return e.filter(function(t,s){return e.map(String).indexOf(String(t))===s})}var e,s,c,a,o,n,r,d;for(e in t)if(t.hasOwnProperty(e)&&(i[e]={},s=t[e],null!==s))for(r=0;r<s.length;r+=1){for(c=s[r],a=c[3],a=l(a),o=[],n=[],d=0;d<a.length;d+=1)o.push(a[d][0]),n.push(a[d][1]);o=o.join(","),0!==o.length&&(i[e].hasOwnProperty(c[0])||(i[e][c[0]]=[]),i[e][c[0]].push({time:o,status:c[1],enrols:c[2],course:e,component:c[0],location:n}))}}(),i.CBS={},$("#tbt").is(":checked")&&(i.CBS.TBT=[{time:"T 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks",location:["Elec Eng 418"]},{time:"T 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks",location:["Elec Eng 418"]},{time:"H 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks",location:["Rup Myers Theatre"]},{time:"H 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks",location:["Rup Myers Theatre"]}]),$("#cth").is(":checked")&&(i.CBS.CoreTheo=[{time:"T 17",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology",location:["Colombo C"]},{time:"W 13",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology",location:["CLB 4"]}]),$("#ctr").is(":checked")&&(i.CBS.CoreTrain=[{time:"T 16",status:"O",enrols:"0,1",course:"CBS",component:"Core Training",location:["Quad Sundial"]},{time:"T 18",status:"O",enrols:"0,1",course:"CBS",component:"Core Training",location:["Quad Sundial"]},{time:"W 12",status:"O",enrols:"0,1",course:"CBS",component:"Core Training",location:["Quad Sundial"]},{time:"W 14",status:"O",enrols:"0,1",course:"CBS",component:"Core Training",location:["Quad Sundial"]}]),$("#bib").is(":checked")&&(i.CBS.BibleStudy=[{time:"M 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"M 12",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"M 13",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"M 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"T 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"T 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"W 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"H 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]},{time:"H 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study",location:["Quad Sundial"]}]),function(){var e,t;for(e in i)if(i.hasOwnProperty(e))for(t in i[e])i[e].hasOwnProperty(t)&&s.push([i[e][t],i[e][t].length]);s.sort(function(e,t){return e[1]-t[1]}),s=s.map(function(e){return e[0]}),s=s.map(function(e){return e.map(function(e){var t=e.time.split(","),s=t.map(function(e){var t=-1!==e.indexOf("#"),s=e.replace(/[^\d\-.]/g,"").split("-");return 1===s.length&&(s[1]=+s[0]+1),[e[0],+s[0],+s[1],t]});return e.time=s,e})})}(),function(){s=s.map(function(e){return e.filter(function(e){var i,t=e.time,s="MTWHF";for(i=0;i<t.length;i+=1)if(-1===s.indexOf(t[i][0]))return!1;return!0})})}(),function(){var e,t,i,c,a,o,n,r,d;for(t=0;t<s.length;t+=1){for(c=s[t],e={},i=0;i<c.length;i+=1)a=c[i],o=a.time.join(","),e.hasOwnProperty(o)?(n=e[o],"O"===a.status&&"O"!==n.status?e[o]=a:"F"===a.status&&"O"!==n.status&&"F"!==n.status?e[o]=a:(r=a.enrols.split(","),d=n.enrols.split(","),r[1]-r[0]<d[1]-d[0]&&(e[o]=a))):e[o]=a;s[t]=[];for(o in e)e.hasOwnProperty(o)&&s[t].push(e[o])}}(),function(){var e,t,i;for(e=0;e<s.length;e+=1)for(i=s[e],t=i.length-1;t>=0;t-=1)$("#fullclasses").is(":checked")?"O"!==i[t].status&&"F"!==i[t].status&&i.splice(t,1):"O"!==i[t].status&&i.splice(t,1)}(),s.sort(function(e,t){return e.length-t.length}),e(s)})}function generate(e,t){"use strict";function c(c){var o,n,r,d,l,u,h,f,a=search(c,i,s);if(e&&null!==a){for(h=1/0,f=-(1/0),o=0;o<classList.length;o+=1)classList[o].remove();for($(".class-shadow").remove(),clearLists(t),d=[],o=0;o<a.length;o+=1)r=a[o],l=courseList.indexOf(r.course),createClass(r,l,d);for(d={},o=0;o<c.length;o+=1)for(n=0;n<c[o].length;n+=1)l=courseList.indexOf(c[o][n].course),u=createShadow(c[o][n],l,d),h=Math.min(h,u.min),f=Math.max(f,u.max);t?restoreClasses():saveState(),hideEmpty(Math.floor(h),Math.floor(f))}}e!==!1&&(e=!0),t!==!0&&(t=!1);var s=t?0:void 0,i=100*+document.getElementById("canclash").checked;fetchData(c)}
