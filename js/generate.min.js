function fetchData(e){"use strict";var t="courses="+encodeURI(JSON.stringify(courseList)),s=[];$.getJSON("data.php",t,function(t){var c={};!function(){function l(e){return e.filter(function(t,s){return e.indexOf(t)===s})}var e,s,o,i,a,n,r;for(e in t)if(t.hasOwnProperty(e)&&(c[e]={},s=t[e],null!==s))for(n=0;n<s.length;n+=1){for(o=s[n],i=o[3],a=[],r=0;r<i.length;r+=1)a.push(i[r][0]);a=l(a),a=a.join(","),0!==a.length&&(c[e].hasOwnProperty(o[0])||(c[e][o[0]]=[]),c[e][o[0]].push({time:a,status:o[1],enrols:o[2],course:e,component:o[0]}))}}(),c.CBS={},$("#tbt").is(":checked")&&(c.CBS.TBT=[{time:"T 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"T 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"H 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"H 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"}]),$("#cth").is(":checked")&&(c.CBS.CoreTheo=[{time:"T 17",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology"},{time:"W 13",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology"}]),$("#ctr").is(":checked")&&(c.CBS.CoreTrain=[{time:"T 16",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"T 18",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"W 12",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"W 14",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"}]),$("#bib").is(":checked")&&(c.CBS.BibleStudy=[{time:"M 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 12",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 13",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"T 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"T 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"W 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"H 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"H 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"}]),function(){var e,t;for(e in c)if(c.hasOwnProperty(e))for(t in c[e])c[e].hasOwnProperty(t)&&s.push([c[e][t],c[e][t].length]);s.sort(function(e,t){return e[1]-t[1]}),s=s.map(function(e){return e[0]}),s=s.map(function(e){return e.map(function(e){var t=e.time.split(","),s=t.map(function(e){var t=e.replace(/[^\d\-.]/g,"").split("-");return 1===t.length&&(t[1]=+t[0]+1),[e[0],+t[0],+t[1]]});return e.time=s,e})})}(),function(){var e,t,c,o,i,a,n,r,l;for(t=0;t<s.length;t+=1){for(o=s[t],e={},c=0;c<o.length;c+=1)i=o[c],a=i.time.join(","),e.hasOwnProperty(a)?(n=e[a],"O"===i.status&&"O"!==n.status?e[a]=i:"F"===i.status&&"O"!==n.status&&"F"!==n.status?e[a]=i:(r=i.enrols.split(","),l=n.enrols.split(","),r[1]-r[0]<l[1]-l[0]&&(e[a]=i))):e[a]=i;s[t]=[];for(a in e)e.hasOwnProperty(a)&&s[t].push(e[a])}}(),function(){var e,t,c;for(e=0;e<s.length;e+=1)for(c=s[e],t=c.length-1;t>=0;t-=1)$("#fullclasses").is(":checked")?"O"!==c[t].status&&"F"!==c[t].status&&c.splice(t,1):"O"!==c[t].status&&c.splice(t,1)}(),s.sort(function(e,t){return e.length-t.length}),e(s)})}function generate(e,t){"use strict";function c(c){var i,a,n,r,l,o=search(c,0,s);if(e&&null!==o){for(i=0;i<classList.length;i+=1)classList[i].remove();for($(".class-shadow").remove(),clearLists(t),r=[],i=0;i<o.length;i+=1)n=o[i],l=courseList.indexOf(n.course),createClass(n.time,n.enrols,n.course,n.component,l,r);for(r={},i=0;i<c.length;i+=1)for(a=0;a<c[i].length;a+=1)l=courseList.indexOf(c[i][a].course),createShadow(c[i][a].time,c[i][a].course+c[i][a].component,l,c[i][a].enrols,r);t?restoreClasses():saveState()}}e!==!1&&(e=!0),t!==!0&&(t=!1);var s=+t||void 0;fetchData(c)}
