function fetchData(t){"use strict";var e="courses="+encodeURI(JSON.stringify(courseList)),s=[];$.getJSON("data.php",e,function(e){var o={};!function(){function l(t){return t.filter(function(e,s){return t.indexOf(e)===s})}var t,s,n,i,r,a,c;for(t in e)if(e.hasOwnProperty(t)&&(o[t]={},s=e[t],null!==s))for(a=0;a<s.length;a+=1){for(n=s[a],i=n[3],r=[],c=0;c<i.length;c+=1)r.push(i[c][0]);r=l(r),r=r.join(","),0!==r.length&&(o[t].hasOwnProperty(n[0])||(o[t][n[0]]=[]),o[t][n[0]].push({time:r,status:n[1],enrols:n[2],course:t,component:n[0]}))}}(),o.CBS={},$("#tbt").is(":checked")&&(o.CBS.TBT=[{time:"T 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"T 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"H 12",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"},{time:"H 13",status:"O",enrols:"0,1",course:"CBS",component:"The Bible Talks"}]),$("#cth").is(":checked")&&(o.CBS.CoreTheo=[{time:"T 17",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology"},{time:"W 13",status:"O",enrols:"0,1",course:"CBS",component:"Core Theology"}]),$("#ctr").is(":checked")&&(o.CBS.CoreTrain=[{time:"T 16",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"T 18",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"W 12",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"},{time:"W 14",status:"O",enrols:"0,1",course:"CBS",component:"Core Training"}]),$("#bib").is(":checked")&&(o.CBS.BibleStudy=[{time:"M 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 12",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 13",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"M 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"T 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"T 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"W 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"H 11",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"},{time:"H 14",status:"O",enrols:"0,1",course:"CBS",component:"Bible Study"}]),function(){var t,e;for(t in o)if(o.hasOwnProperty(t))for(e in o[t])o[t].hasOwnProperty(e)&&s.push([o[t][e],o[t][e].length]);s.sort(function(t,e){return t[1]-e[1]}),s=s.map(function(t){return t[0]}),s=s.map(function(t){return t.map(function(t){var e=t.time.split(","),s=e.map(function(t){var e=t.replace(/[^\d\-.]/g,"").split("-");return 1===e.length&&(e[1]=+e[0]+1),[t[0],+e[0],+e[1]]});return t.time=s,t})})}(),function(){var t,e,o,n,i,r,a,c,l;for(e=0;e<s.length;e+=1){for(n=s[e],t={},o=0;o<n.length;o+=1)i=n[o],r=i.time.join(","),t.hasOwnProperty(r)?(a=t[r],"O"===i.status&&"O"!==a.status?t[r]=i:"F"===i.status&&"O"!==a.status&&"F"!==a.status?t[r]=i:(c=i.enrols.split(","),l=a.enrols.split(","),c[1]-c[0]<l[1]-l[0]&&(t[r]=i))):t[r]=i;s[e]=[];for(r in t)t.hasOwnProperty(r)&&s[e].push(t[r])}}(),function(){var t,e,o;for(t=0;t<s.length;t+=1)for(o=s[t],e=o.length-1;e>=0;e-=1)$("#fullclasses").is(":checked")?"O"!==o[e].status&&"F"!==o[e].status&&o.splice(e,1):"O"!==o[e].status&&o.splice(e,1)}(),s.sort(function(t,e){return t.length-e.length}),t(s)})}function generate(t,e){"use strict";function o(o){var i,r,a,c,l,n=search(o,0,s);if(console.log(o),t&&null!==n){for(i=0;i<classList.length;i+=1)classList[i].remove();for($(".class-shadow").remove(),clearLists(e),c=[],i=0;i<n.length;i+=1)a=n[i],l=courseList.indexOf(a.course),createClass(a.time,a.enrols,a.course,a.component,l,c);for(c={},i=0;i<o.length;i+=1)for(r=0;r<o[i].length;r+=1)l=courseList.indexOf(o[i][r].course),createShadow(o[i][r].time,o[i][r].course+o[i][r].component,l,o[i][r].enrols,c);e&&restoreClasses()}}t!==!1&&(t=!0),e!==!0&&(e=!1);var s=+e||void 0;fetchData(o)}
