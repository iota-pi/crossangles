function search(e,t){"use strict";function l(e,t){return e[0]!==t[0]?!1:e[1]>=t[2]||t[1]>=e[2]?!1:!0}function r(e,r,n){var s,a,i,f,u,o=0;for(s=0;s<n.length;s+=1)for(a=0;a<r.length;a+=1)for(f=e[a][r[a]],u=f[0],i=0;i<u.length;i+=1)if(l(n[s],u[i])&&(o+=1,o>t))return o;return o}function n(e,l,n){for(var s=n[l]+1||0,a=e[l];s<a.length&&r(e,n,a[s][0])>t;)s+=1;return s===a.length?null:s}function s(e,t,l){var s,a,r=l||0,i=t||[];if(void 0!==l)for(;i.length>l;)i.pop();for(;r<e.length;)if(s=e[r],a=n(e,r,i),null===a){if(r<i.length&&i.pop(),r-=1,0>r)return null}else i[r]=a,r+=1;return i}function a(e){var t,l,r;for(t=e.length-1;t>0;t-=1)l=Math.floor(Math.random()*(t+1)),r=e[t],e[t]=e[l],e[l]=r;return e}function i(e){var l,r,t={streams:[],timetable:null,score:null};for(l=0;l<e.streams.length;l+=1)t.streams.push(e.streams[l]);for(;null===t.timetable;)r=Math.floor(Math.random()*t.streams.length),t.streams[r]=a(t.streams[r]),t.timetable=s(t.streams,e.timetable,r);return t.score=scoreTimetable(t.timetable,t.streams),t}function f(e,t){return t.score-e.score}function u(e,t,l,r){l=l||100,t=t||10,r=r||1;var n,s,a,u;for(n=0;l>n;n+=1)if(s=Math.floor(Math.random()*(e.length+r))%e.length,a=e[s],u=i(a),e.push(u),n%10===9)for(e.sort(f);e.length>t;)e.pop();return e[0]}function o(t){var r,n,i,l=[];for(n=0;t>n;n+=1){for(r={streams:[],timetable:null,score:null},i=0;i<e.length;i+=1)r.streams.push(a(e[i]));if(r.timetable=s(r.streams),r.score=scoreTimetable(r.timetable,r.streams),null===r.timetable)return console.error("No timetables could be generated!"),null;l.push(r)}return l.sort(f)}var h=o(1),c=u(h);return console.log(c.score),c.timetable.map(function(e,t){return c.streams[t][e]})}
