function search(e,t){"use strict";function r(e,t){return e[0]!==t[0]?!1:e[1]>=t[2]||t[1]>=e[2]?!1:!0}function n(e,n,l){var s,o,a,u,i,f=0;for(s=0;s<l.length;s+=1)for(o=0;o<n.length;o+=1)for(u=e[o][n[o]],i=u[0],a=0;a<i.length;a+=1)if(r(l[s],i[a])&&(f+=1,f>t))return f;return f}function l(e,r,l){for(var s=l[r]+1||0,o=e[r];s<o.length&&n(e,l,o[s][0])>t;)s+=1;return s===o.length?null:s}function s(e,t,r){var s,o,n=r||0,a=t||[];if(void 0!==r)for(;a.length>r;)a.pop();for(;n<e.length;)if(s=e[n],o=l(e,n,a),null===o){if(n<a.length&&a.pop(),n-=1,0>n)return null}else a[n]=o,n+=1;return a}function o(e){var t,r,n;for(t=e.length-1;t>0;t-=1)r=Math.floor(Math.random()*(t+1)),n=e[t],e[t]=e[r],e[r]=n;return e}function a(e){var r,n,t={streams:[],timetable:null,score:null};for(r=0;r<e.streams.length;r+=1)t.streams.push(e.streams[r]);for(;null===t.timetable;)n=Math.floor(Math.random()*t.streams.length),t.streams[n]=o(t.streams[n]),t.timetable=s(t.streams,e.timetable,n);return t.score=scoreTimetable(t.timetable,t.streams),t}function u(e,t){return t.score-e.score}function i(e,t,r,n){r=r||100,t=t||10,n=n||1;var l,s,o,i;for(l=0;r>l;l+=1)if(s=Math.floor(Math.random()*(e.length+n))%e.length,o=e[s],i=a(o),e.push(i),l%10===9)for(e.sort(u);e.length>t;)e.pop();return e[0]}function f(t){var n,l,a,r=[];for(l=0;t>l;l+=1){for(n={streams:[],timetable:null,score:null},a=0;a<e.length;a+=1)n.streams.push(o(e[a]));if(n.timetable=s(n.streams),n.score=scoreTimetable(n.timetable,n.streams),null===n.timetable)return console.error("No timetables could be generated!"),null;r.push(n)}return r.sort(u)}var h=f(10),m=i(h);return console.log(m.score),m.timetable.map(function(e,t){return m.streams[t][e]})}
