function scoreTime(e,t){"use strict";var r=4-Math.abs(14.5-(e+t)/2);return r*=Math.abs(r),r*=t-e}function classClash(e,t){"use strict";return e[0]!==t[0]?!1:e[1]>=t[2]||t[1]>=e[2]?!1:!0}function evaluateTimetable(e,t){"use strict";if(null===e)return null;var n,s,a,f,i,u,g,r=e.map(function(e,r){return t[r][e]}),l=0,o={M:!1,T:!1,W:!1,H:!1,F:!1},h={M:!1,T:!1,W:!1,H:!1,F:!1},c=[],m={M:120,T:100,W:180,H:100,F:150},T=150,v=100,M=150,d=-500;for(n=0;n<r.length;n+=1){for(i=r[n][0],s=0;s<i.length;s+=1)for(u=i[s],"CBS"===r[n][3]?(o[u[0]]=!0,c.push(u)):h[u[0]]=!0,l+=scoreTime(u[1],u[2]),a=n;a<r.length;a+=1)for(f=0;f<r[a][0].length;f+=1)classClash(u,r[a][0][f])&&(l+=d);"The Bible Talks"===r[n][4]?l+=T:"Core Theology"===r[n][4]||"Core Training"===r[n][4]?l+=v:"Bible Study"===r[n][4]&&(l+=M)}for(g in h)h.hasOwnProperty(g)&&h[g]===!1&&o[g]===!1&&(l+=m[g]);return l}function search(e,t){"use strict";function r(e,r,l){var n,s,a,f,i,u=0;for(n=0;n<l.length;n+=1)for(s=0;s<r.length;s+=1)for(f=e[s][r[s]],i=f[0],a=0;a<i.length;a+=1)if(classClash(l[n],i[a])&&(u+=1,u>t))return u;return u}function l(e,l,n){for(var s=n[l]||0,a=e[l];s<a.length&&r(e,n,a[s])>t;)s+=1;return s===a.length?null:s}function n(e,t,r){for(var s,a,n=r||0,f=t||[];n<e.length;)if(s=e[n],a=l(e,n,f),null===a){if(n<f.length&&f.pop(),n-=1,0>n)return null}else f[n]=a,n+=1;return f}function s(e){var t,r,l;for(t=e.length-1;t>0;t-=1)r=Math.floor(Math.random()*(t+1)),l=e[t],e[t]=e[r],e[r]=l;return e}function a(e){var r,l,t={classes:[],timetable:null,score:null};for(r=0;r<e.classes.length;r+=1)t.classes.push(e.classes[r]);for(;null===t.timetable;)l=Math.floor(Math.random()*e.length),t.classes[l]=s(t.classes[l]),t.timetable=n(t.classes,e.timetable,l);return t.score=evaluateTimetable(t.timetable,t.classes),t}function f(e,t){return t.score-e.score}function i(e,t,r,l){r=r||100,t=t||10,l=l||1;var n,s,i,u;for(n=0;r>n;n+=1)if(s=Math.floor(Math.random()*(e.length+l))%e.length,i=e[s],u=a(i),e.push(u),n%10===9)for(e.sort(f);e.length>t;)f.pop();return e[0]}function u(t){var l,a,i,r=[];for(a=0;t>a;a+=1){for(l={classes:[],timetable:null,score:null},i=0;i<e.length;i+=1)l.classes.push(s(e[i]));if(l.timetable=n(l.classes),l.score=evaluateTimetable(l.timetable,l.classes),null===l.timetable)return console.error("No timetables could be generated!"),null;r.push(l)}return r.sort(f)}var o=u(5),h=i(o);return h.timetable}
