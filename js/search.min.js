function search(e,t){"use strict";function r(e,t){return e[0]!==t[0]?!1:Math.max(0,Math.min(e[2],t[2])-Math.max(e[1],t[1]))}function n(e,t,n){var l,a,s,u,o,i=0;for(l=0;l<n.length;l+=1)for(a=0;a<t.length;a+=1)for(u=e[a][t[a]],o=u[0],s=0;s<o.length;s+=1)i+=r(n[l],o[s]);return i}function l(e,r,l){for(var a=l[r]+1||0,s=e[r];a<s.length&&n(e,l,s[a][0])>t;)a+=1;return a===s.length?null:a}function a(e,t,r){var a,s,n=r||0,u=t||[];if(void 0!==r)for(;u.length>r;)u.pop();for(;n<e.length;)if(a=e[n],s=l(e,n,u),null===s){if(n<u.length&&u.pop(),n-=1,0>n)return null}else u[n]=s,n+=1;return u}function s(e){var t,r,n;for(t=e.length-1;t>0;t-=1)r=Math.floor(Math.random()*(t+1)),n=e[t],e[t]=e[r],e[r]=n;return e}function u(e){var r,n,t={streams:[],timetable:null,score:null};for(r=0;r<e.streams.length;r+=1)t.streams.push(e.streams[r].slice());for(;null===t.timetable;)n=Math.floor(Math.random()*t.streams.length),s(t.streams[n]),t.timetable=a(t.streams,e.timetable.slice(),n);return t.score=scoreTimetable(t.timetable,t.streams),t}function o(e,t){return t.score-e.score}function i(e,t,r,n){if(null===e)return null;r=r||1e3,t=t||50,n=n||10;var l,a,s,i;for(l=0;r>l;l+=1)if(a=Math.floor(Math.random()*(e.length+n))%e.length,s=e[a],i=u(s),e.push(i),l%10===9)for(e.sort(o);e.length>t;)e.pop();return e[0]}function f(t){var n,l,u,r=[];for(l=0;t>l;l+=1){for(n={streams:[],timetable:null,score:null},u=0;u<e.length;u+=1)n.streams.push(s(e[u]));if(n.timetable=a(n.streams),n.score=scoreTimetable(n.timetable,n.streams),null===n.timetable)return null;r.push(n)}return r.sort(o)}var h=f(10),m=i(h);return null===m?(console.error("No timetables could be generated!"),null):m.timetable.map(function(e,t){return m.streams[t][e]})}
