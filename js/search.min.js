function search(e,r){"use strict";function t(e,r){return e[0]!==r[0]?!1:Math.max(0,Math.min(e[2],r[2])-Math.max(e[1],r[1]))}function n(e,r,n){var s,l,i,o,u,f=0;for(s=0;s<n.length;s+=1)for(l=0;l<r.length;l+=1)for(o=e[l][r[l]],u=o[0],i=0;i<u.length;i+=1)f+=t(n[s],u[i]);return f}function s(e,t,s){for(var l=s[t]+1||0,i=e[t];l<i.length&&n(e,s,i[l][0])>r;)l+=1;return l===i.length?null:l}function l(e,r,t){var l,n=t||0,i=r||[];if(void 0!==t)for(;i.length>t;)i.pop();for(;n<e.length;)if(l=s(e,n,i),null===l){if(n<i.length&&i.pop(),n-=1,0>n)return null}else i[n]=l,n+=1;return i}function i(e){var r,t,n;for(r=e.length-1;r>0;r-=1)t=Math.floor(Math.random()*(r+1)),n=e[r],e[r]=e[t],e[t]=n;return e}function o(e,r){return r.score-e.score}function u(r){var n,s,u,t=[];for(s=0;r>s;s+=1){for(n={streams:[],timetable:null,score:null},u=0;u<e.length;u+=1)n.streams.push(i(e[u].slice()));if(n.timetable=l(n.streams),n.score=scoreTimetable(n.timetable,n.streams),null===n.timetable)return null;t.push(n)}return t.sort(o)}function f(e){var t,n,r={streams:[],timetable:null,score:null};for(t=0;t<e.streams.length;t+=1)r.streams.push(e.streams[t].slice());for(;null===r.timetable;)n=Math.floor(Math.random()*r.streams.length),i(r.streams[n]),r.timetable=l(r.streams,e.timetable.slice(),n);return r.score=scoreTimetable(r.timetable,r.streams),r}function a(e,r,t,n){if(null===e)return null;t=t||1e3,r=r||50,n=n||10;var s,l,i,u;for(s=0;t>s;s+=1)if(l=Math.floor(Math.random()*(e.length+n))%e.length,i=e[l],u=f(i),e.push(u),s%10===9)for(e.sort(o);e.length>r;)e.pop();return e[0]}var c=u(10),h=a(c);return null===h?(console.error("No timetables could be generated!"),null):h.timetable.map(function(e,r){return h.streams[r][e]})}
