function search(e,t){"use strict";function r(e,t){return e[0]!==t[0]?!1:Math.max(0,Math.min(e[2],t[2])-Math.max(e[1],t[1]))}function l(e,t,l){var n,s,a,i,f,u=0;for(n=0;n<l.length;n+=1)for(s=0;s<t.length;s+=1)for(i=e[s][t[s]],f=i[0],a=0;a<f.length;a+=1)u+=r(l[n],f[a]);return u}function n(e,r,n){for(var s=n[r]+1||0,a=e[r];s<a.length&&l(e,n,a[s][0])>t;)s+=1;return s===a.length?null:s}function s(e,t,r){var s,a,l=r||0,i=t||[];if(void 0!==r)for(;i.length>r;)i.pop();for(;l<e.length;)if(s=e[l],a=n(e,l,i),null===a){if(l<i.length&&i.pop(),l-=1,0>l)return null}else i[l]=a,l+=1;return i}function a(e){var t,r,l;for(t=e.length-1;t>0;t-=1)r=Math.floor(Math.random()*(t+1)),l=e[t],e[t]=e[r],e[r]=l;return e}function i(e){var r,l,t={streams:[],timetable:null,score:null};for(r=0;r<e.streams.length;r+=1)t.streams.push(e.streams[r].slice());for(;null===t.timetable;)l=Math.floor(Math.random()*t.streams.length),a(t.streams[l]),t.timetable=e.timetable.slice(),t.timetable=s(t.streams,t.timetable,l);return t.score=scoreTimetable(t.timetable,t.streams),t}function f(e,t){return t.score-e.score}function u(e,t,r,l){r=r||100,t=t||10,l=l||5;var n,s,a,u;for(n=0;r>n;n+=1)if(s=Math.floor(Math.random()*(e.length+l))%e.length,a=e[s],u=i(a),e.push(u),n%10===9)for(e.sort(f);e.length>t;)e.pop();return e[0]}function o(t){var l,n,i,r=[];for(n=0;t>n;n+=1){for(l={streams:[],timetable:null,score:null},i=0;i<e.length;i+=1)l.streams.push(a(e[i]));if(l.timetable=s(l.streams),l.score=scoreTimetable(l.timetable,l.streams),null===l.timetable)return console.error("No timetables could be generated!"),null;r.push(l)}return r.sort(f)}var c=o(5),h=u(c);return console.log(h),h.timetable.map(function(e,t){return h.streams[t][e]})}
