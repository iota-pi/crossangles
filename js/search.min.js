function search(e,r){"use strict";function t(e,r){return e[0]!==r[0]?!1:e[1]>=r[2]||r[1]>=e[2]?!1:!0}function n(e,n,s){var i,o,l,u,f,a=0;for(i=0;i<s.length;i+=1)for(o=0;o<n.length;o+=1)for(u=e[o][n[o]],f=u[0],l=0;l<f.length;l+=1)if(t(s[i],f[l])&&(a+=1,a>r))return a;return a}function s(e,t,s){for(var i=s[t]+1||0,o=e[t];i<o.length&&n(e,s,o[i][0])>r;)i+=1;return i===o.length?null:i}function i(e,r,t){var i,o,n=t||0,l=r||[];if(void 0!==t)for(;l.length>t;)l.pop();for(;n<e.length;)if(i=e[n],o=s(e,n,l),null===o){if(n<l.length&&l.pop(),n-=1,0>n)return null}else l[n]=o,n+=1;return l}function o(e){var r,t,n;for(r=e.length-1;r>0;r-=1)t=Math.floor(Math.random()*(r+1)),n=e[r],e[r]=e[t],e[t]=n;return e}function l(e){var t,n,r={streams:[],timetable:null,score:null};for(t=0;t<e.streams.length;t+=1)r.streams.push(e.streams[t].slice());for(;null===r.timetable;)n=Math.floor(Math.random()*r.streams.length),o(r.streams[n]),r.timetable=i(r.streams,e.timetable,n);return r.score=scoreTimetable(r.timetable,r.streams),r}function u(e,r){return r.score-e.score}function f(e,r,t,n){t=t||100,r=r||10,n=n||5;var s,i,o,f;for(s=0;t>s;s+=1)if(i=Math.floor(Math.random()*(e.length+n))%e.length,o=e[i],f=l(o),e.push(f),s%10===9)for(e.sort(u);e.length>r;)e.pop();return e[0]}function a(r){var n,s,l,t=[];for(s=0;r>s;s+=1){for(n={streams:[],timetable:null,score:null},l=0;l<e.length;l+=1)n.streams.push(o(e[l]));if(n.timetable=i(n.streams),n.score=scoreTimetable(n.timetable,n.streams),null===n.timetable)return console.error("No timetables could be generated!"),null;t.push(n)}return t.sort(u)}var c=a(5),h=f(c);return console.log(h.score),h.timetable.map(function(e,r){return h.streams[r][e]})}
